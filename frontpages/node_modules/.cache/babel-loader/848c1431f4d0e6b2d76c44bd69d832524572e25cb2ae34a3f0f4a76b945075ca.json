{"ast":null,"code":"import React from'react';import{BrowserRouter as Router,Routes,Route,Navigate}from'react-router-dom';import Home from'./pages/Home';import UserCenter from'./pages/UserCenter';import Feedback from'./pages/Feedback';import StudyPlan from'./pages/StudyPlan';import Login from'./pages/Login';import Register from'./pages/Register';import'antd/dist/reset.css';// 路由守卫组件\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PrivateRoute=_ref=>{let{children}=_ref;// 从 localStorage 获取登录状态\nconst isLoggedIn=localStorage.getItem('isLoggedIn')==='true';// 如果未登录，重定向到登录页面\nif(!isLoggedIn){return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true});}// 如果已登录，显示受保护的路由内容\nreturn children;};// 公共路由组件（用于登录和注册页面）\nconst PublicRoute=_ref2=>{let{children}=_ref2;const isLoggedIn=localStorage.getItem('isLoggedIn')==='true';// 如果已登录，重定向到首页\nif(isLoggedIn){return/*#__PURE__*/_jsx(Navigate,{to:\"/\",replace:true});}// 如果未登录，显示登录/注册页面\nreturn children;};function App(){return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(PublicRoute,{children:/*#__PURE__*/_jsx(Login,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(PublicRoute,{children:/*#__PURE__*/_jsx(Register,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(PrivateRoute,{children:/*#__PURE__*/_jsx(Home,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/user\",element:/*#__PURE__*/_jsx(PrivateRoute,{children:/*#__PURE__*/_jsx(UserCenter,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/feedback\",element:/*#__PURE__*/_jsx(PrivateRoute,{children:/*#__PURE__*/_jsx(Feedback,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/study-plan\",element:/*#__PURE__*/_jsx(PrivateRoute,{children:/*#__PURE__*/_jsx(StudyPlan,{})})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:localStorage.getItem('isLoggedIn')==='true'?/*#__PURE__*/_jsx(Navigate,{to:\"/\",replace:true}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\",replace:true})})]})});}export default App;","map":{"version":3,"names":["React","BrowserRouter","Router","Routes","Route","Navigate","Home","UserCenter","Feedback","StudyPlan","Login","Register","jsx","_jsx","jsxs","_jsxs","PrivateRoute","_ref","children","isLoggedIn","localStorage","getItem","to","replace","PublicRoute","_ref2","App","path","element"],"sources":["/home/gnahz/Documents/learning_msys/frontpages/src/App.js"],"sourcesContent":["import React from 'react';\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\nimport Home from './pages/Home';\nimport UserCenter from './pages/UserCenter';\nimport Feedback from './pages/Feedback';\nimport StudyPlan from './pages/StudyPlan';\nimport Login from './pages/Login';\nimport Register from './pages/Register';\nimport 'antd/dist/reset.css';\n\n// 路由守卫组件\nconst PrivateRoute = ({ children }) => {\n  // 从 localStorage 获取登录状态\n  const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';\n  \n  // 如果未登录，重定向到登录页面\n  if (!isLoggedIn) {\n    return <Navigate to=\"/login\" replace />;\n  }\n\n  // 如果已登录，显示受保护的路由内容\n  return children;\n};\n\n// 公共路由组件（用于登录和注册页面）\nconst PublicRoute = ({ children }) => {\n  const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';\n  \n  // 如果已登录，重定向到首页\n  if (isLoggedIn) {\n    return <Navigate to=\"/\" replace />;\n  }\n\n  // 如果未登录，显示登录/注册页面\n  return children;\n};\n\nfunction App() {\n  return (\n    <Router>\n      <Routes>\n        {/* 公共路由 */}\n        <Route \n          path=\"/login\" \n          element={\n            <PublicRoute>\n              <Login />\n            </PublicRoute>\n          } \n        />\n        <Route \n          path=\"/register\" \n          element={\n            <PublicRoute>\n              <Register />\n            </PublicRoute>\n          } \n        />\n        \n        {/* 受保护的路由 */}\n        <Route \n          path=\"/\" \n          element={\n            <PrivateRoute>\n              <Home />\n            </PrivateRoute>\n          } \n        />\n        <Route \n          path=\"/user\" \n          element={\n            <PrivateRoute>\n              <UserCenter />\n            </PrivateRoute>\n          } \n        />\n        <Route \n          path=\"/feedback\" \n          element={\n            <PrivateRoute>\n              <Feedback />\n            </PrivateRoute>\n          } \n        />\n        <Route \n          path=\"/study-plan\" \n          element={\n            <PrivateRoute>\n              <StudyPlan />\n            </PrivateRoute>\n          } \n        />\n        \n        {/* 将未匹配的路由重定向到首页或登录页面 */}\n        <Route \n          path=\"*\" \n          element={\n            localStorage.getItem('isLoggedIn') === 'true' \n              ? <Navigate to=\"/\" replace /> \n              : <Navigate to=\"/login\" replace />\n          } \n        />\n      </Routes>\n    </Router>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
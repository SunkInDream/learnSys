{"ast":null,"code":"import { __assign, __extends } from 'tslib';\nimport * as React from 'react';\nimport normalizeWheel from 'normalize-wheel';\n\n/**\r\n * Compute the dimension of the crop area based on media size,\r\n * aspect ratio and optionally rotation\r\n */\nfunction getCropSize(mediaWidth, mediaHeight, containerWidth, containerHeight, aspect, rotation) {\n  if (rotation === void 0) {\n    rotation = 0;\n  }\n  var _a = rotateSize(mediaWidth, mediaHeight, rotation),\n    width = _a.width,\n    height = _a.height;\n  var fittingWidth = Math.min(width, containerWidth);\n  var fittingHeight = Math.min(height, containerHeight);\n  if (fittingWidth > fittingHeight * aspect) {\n    return {\n      width: fittingHeight * aspect,\n      height: fittingHeight\n    };\n  }\n  return {\n    width: fittingWidth,\n    height: fittingWidth / aspect\n  };\n}\n/**\r\n * Compute media zoom.\r\n * We fit the media into the container with \"max-width: 100%; max-height: 100%;\"\r\n */\nfunction getMediaZoom(mediaSize) {\n  // Take the axis with more pixels to improve accuracy\n  return mediaSize.width > mediaSize.height ? mediaSize.width / mediaSize.naturalWidth : mediaSize.height / mediaSize.naturalHeight;\n}\n/**\r\n * Ensure a new media position stays in the crop area.\r\n */\nfunction restrictPosition(position, mediaSize, cropSize, zoom, rotation) {\n  if (rotation === void 0) {\n    rotation = 0;\n  }\n  var _a = rotateSize(mediaSize.width, mediaSize.height, rotation),\n    width = _a.width,\n    height = _a.height;\n  return {\n    x: restrictPositionCoord(position.x, width, cropSize.width, zoom),\n    y: restrictPositionCoord(position.y, height, cropSize.height, zoom)\n  };\n}\nfunction restrictPositionCoord(position, mediaSize, cropSize, zoom) {\n  var maxPosition = mediaSize * zoom / 2 - cropSize / 2;\n  return clamp(position, -maxPosition, maxPosition);\n}\nfunction getDistanceBetweenPoints(pointA, pointB) {\n  return Math.sqrt(Math.pow(pointA.y - pointB.y, 2) + Math.pow(pointA.x - pointB.x, 2));\n}\nfunction getRotationBetweenPoints(pointA, pointB) {\n  return Math.atan2(pointB.y - pointA.y, pointB.x - pointA.x) * 180 / Math.PI;\n}\n/**\r\n * Compute the output cropped area of the media in percentages and pixels.\r\n * x/y are the top-left coordinates on the src media\r\n */\nfunction computeCroppedArea(crop, mediaSize, cropSize, aspect, zoom, rotation, restrictPosition) {\n  if (rotation === void 0) {\n    rotation = 0;\n  }\n  if (restrictPosition === void 0) {\n    restrictPosition = true;\n  }\n  // if the media is rotated by the user, we cannot limit the position anymore\n  // as it might need to be negative.\n  var limitAreaFn = restrictPosition ? limitArea : noOp;\n  var mediaBBoxSize = rotateSize(mediaSize.width, mediaSize.height, rotation);\n  var mediaNaturalBBoxSize = rotateSize(mediaSize.naturalWidth, mediaSize.naturalHeight, rotation);\n  // calculate the crop area in percentages\n  // in the rotated space\n  var croppedAreaPercentages = {\n    x: limitAreaFn(100, ((mediaBBoxSize.width - cropSize.width / zoom) / 2 - crop.x / zoom) / mediaBBoxSize.width * 100),\n    y: limitAreaFn(100, ((mediaBBoxSize.height - cropSize.height / zoom) / 2 - crop.y / zoom) / mediaBBoxSize.height * 100),\n    width: limitAreaFn(100, cropSize.width / mediaBBoxSize.width * 100 / zoom),\n    height: limitAreaFn(100, cropSize.height / mediaBBoxSize.height * 100 / zoom)\n  };\n  // we compute the pixels size naively\n  var widthInPixels = Math.round(limitAreaFn(mediaNaturalBBoxSize.width, croppedAreaPercentages.width * mediaNaturalBBoxSize.width / 100));\n  var heightInPixels = Math.round(limitAreaFn(mediaNaturalBBoxSize.height, croppedAreaPercentages.height * mediaNaturalBBoxSize.height / 100));\n  var isImgWiderThanHigh = mediaNaturalBBoxSize.width >= mediaNaturalBBoxSize.height * aspect;\n  // then we ensure the width and height exactly match the aspect (to avoid rounding approximations)\n  // if the media is wider than high, when zoom is 0, the crop height will be equals to image height\n  // thus we want to compute the width from the height and aspect for accuracy.\n  // Otherwise, we compute the height from width and aspect.\n  var sizePixels = isImgWiderThanHigh ? {\n    width: Math.round(heightInPixels * aspect),\n    height: heightInPixels\n  } : {\n    width: widthInPixels,\n    height: Math.round(widthInPixels / aspect)\n  };\n  var croppedAreaPixels = __assign(__assign({}, sizePixels), {\n    x: Math.round(limitAreaFn(mediaNaturalBBoxSize.width - sizePixels.width, croppedAreaPercentages.x * mediaNaturalBBoxSize.width / 100)),\n    y: Math.round(limitAreaFn(mediaNaturalBBoxSize.height - sizePixels.height, croppedAreaPercentages.y * mediaNaturalBBoxSize.height / 100))\n  });\n  return {\n    croppedAreaPercentages: croppedAreaPercentages,\n    croppedAreaPixels: croppedAreaPixels\n  };\n}\n/**\r\n * Ensure the returned value is between 0 and max\r\n */\nfunction limitArea(max, value) {\n  return Math.min(max, Math.max(0, value));\n}\nfunction noOp(_max, value) {\n  return value;\n}\n/**\r\n * Compute crop and zoom from the croppedAreaPercentages.\r\n */\nfunction getInitialCropFromCroppedAreaPercentages(croppedAreaPercentages, mediaSize, rotation, cropSize, minZoom, maxZoom) {\n  var mediaBBoxSize = rotateSize(mediaSize.width, mediaSize.height, rotation);\n  // This is the inverse process of computeCroppedArea\n  var zoom = clamp(cropSize.width / mediaBBoxSize.width * (100 / croppedAreaPercentages.width), minZoom, maxZoom);\n  var crop = {\n    x: zoom * mediaBBoxSize.width / 2 - cropSize.width / 2 - mediaBBoxSize.width * zoom * (croppedAreaPercentages.x / 100),\n    y: zoom * mediaBBoxSize.height / 2 - cropSize.height / 2 - mediaBBoxSize.height * zoom * (croppedAreaPercentages.y / 100)\n  };\n  return {\n    crop: crop,\n    zoom: zoom\n  };\n}\n/**\r\n * Compute zoom from the croppedAreaPixels\r\n */\nfunction getZoomFromCroppedAreaPixels(croppedAreaPixels, mediaSize, cropSize) {\n  var mediaZoom = getMediaZoom(mediaSize);\n  return cropSize.height > cropSize.width ? cropSize.height / (croppedAreaPixels.height * mediaZoom) : cropSize.width / (croppedAreaPixels.width * mediaZoom);\n}\n/**\r\n * Compute crop and zoom from the croppedAreaPixels\r\n */\nfunction getInitialCropFromCroppedAreaPixels(croppedAreaPixels, mediaSize, rotation, cropSize, minZoom, maxZoom) {\n  if (rotation === void 0) {\n    rotation = 0;\n  }\n  var mediaNaturalBBoxSize = rotateSize(mediaSize.naturalWidth, mediaSize.naturalHeight, rotation);\n  var zoom = clamp(getZoomFromCroppedAreaPixels(croppedAreaPixels, mediaSize, cropSize), minZoom, maxZoom);\n  var cropZoom = cropSize.height > cropSize.width ? cropSize.height / croppedAreaPixels.height : cropSize.width / croppedAreaPixels.width;\n  var crop = {\n    x: ((mediaNaturalBBoxSize.width - croppedAreaPixels.width) / 2 - croppedAreaPixels.x) * cropZoom,\n    y: ((mediaNaturalBBoxSize.height - croppedAreaPixels.height) / 2 - croppedAreaPixels.y) * cropZoom\n  };\n  return {\n    crop: crop,\n    zoom: zoom\n  };\n}\n/**\r\n * Return the point that is the center of point a and b\r\n */\nfunction getCenter(a, b) {\n  return {\n    x: (b.x + a.x) / 2,\n    y: (b.y + a.y) / 2\n  };\n}\nfunction getRadianAngle(degreeValue) {\n  return degreeValue * Math.PI / 180;\n}\n/**\r\n * Returns the new bounding area of a rotated rectangle.\r\n */\nfunction rotateSize(width, height, rotation) {\n  var rotRad = getRadianAngle(rotation);\n  return {\n    width: Math.abs(Math.cos(rotRad) * width) + Math.abs(Math.sin(rotRad) * height),\n    height: Math.abs(Math.sin(rotRad) * width) + Math.abs(Math.cos(rotRad) * height)\n  };\n}\n/**\r\n * Clamp value between min and max\r\n */\nfunction clamp(value, min, max) {\n  return Math.min(Math.max(value, min), max);\n}\n/**\r\n * Combine multiple class names into a single string.\r\n */\nfunction classNames() {\n  var args = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    args[_i] = arguments[_i];\n  }\n  return args.filter(function (value) {\n    if (typeof value === 'string' && value.length > 0) {\n      return true;\n    }\n    return false;\n  }).join(' ').trim();\n}\nvar css_248z = \".reactEasyCrop_Container {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  overflow: hidden;\\n  user-select: none;\\n  touch-action: none;\\n  cursor: move;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n}\\n\\n.reactEasyCrop_Image,\\n.reactEasyCrop_Video {\\n  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */\\n}\\n\\n.reactEasyCrop_Contain {\\n  max-width: 100%;\\n  max-height: 100%;\\n  margin: auto;\\n  position: absolute;\\n  top: 0;\\n  bottom: 0;\\n  left: 0;\\n  right: 0;\\n}\\n.reactEasyCrop_Cover_Horizontal {\\n  width: 100%;\\n  height: auto;\\n}\\n.reactEasyCrop_Cover_Vertical {\\n  width: auto;\\n  height: 100%;\\n}\\n\\n.reactEasyCrop_CropArea {\\n  position: absolute;\\n  left: 50%;\\n  top: 50%;\\n  transform: translate(-50%, -50%);\\n  border: 1px solid rgba(255, 255, 255, 0.5);\\n  box-sizing: border-box;\\n  box-shadow: 0 0 0 9999em;\\n  color: rgba(0, 0, 0, 0.5);\\n  overflow: hidden;\\n}\\n\\n.reactEasyCrop_CropAreaRound {\\n  border-radius: 50%;\\n}\\n\\n.reactEasyCrop_CropAreaGrid::before {\\n  content: ' ';\\n  box-sizing: border-box;\\n  position: absolute;\\n  border: 1px solid rgba(255, 255, 255, 0.5);\\n  top: 0;\\n  bottom: 0;\\n  left: 33.33%;\\n  right: 33.33%;\\n  border-top: 0;\\n  border-bottom: 0;\\n}\\n\\n.reactEasyCrop_CropAreaGrid::after {\\n  content: ' ';\\n  box-sizing: border-box;\\n  position: absolute;\\n  border: 1px solid rgba(255, 255, 255, 0.5);\\n  top: 33.33%;\\n  bottom: 33.33%;\\n  left: 0;\\n  right: 0;\\n  border-left: 0;\\n  border-right: 0;\\n}\\n\";\nvar MIN_ZOOM = 1;\nvar MAX_ZOOM = 3;\nvar KEYBOARD_STEP = 1;\nvar Cropper = /** @class */function (_super) {\n  __extends(Cropper, _super);\n  function Cropper() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.imageRef = React.createRef();\n    _this.videoRef = React.createRef();\n    _this.containerPosition = {\n      x: 0,\n      y: 0\n    };\n    _this.containerRef = null;\n    _this.styleRef = null;\n    _this.containerRect = null;\n    _this.mediaSize = {\n      width: 0,\n      height: 0,\n      naturalWidth: 0,\n      naturalHeight: 0\n    };\n    _this.dragStartPosition = {\n      x: 0,\n      y: 0\n    };\n    _this.dragStartCrop = {\n      x: 0,\n      y: 0\n    };\n    _this.gestureZoomStart = 0;\n    _this.gestureRotationStart = 0;\n    _this.isTouching = false;\n    _this.lastPinchDistance = 0;\n    _this.lastPinchRotation = 0;\n    _this.rafDragTimeout = null;\n    _this.rafPinchTimeout = null;\n    _this.wheelTimer = null;\n    _this.currentDoc = typeof document !== 'undefined' ? document : null;\n    _this.currentWindow = typeof window !== 'undefined' ? window : null;\n    _this.resizeObserver = null;\n    _this.state = {\n      cropSize: null,\n      hasWheelJustStarted: false,\n      mediaObjectFit: undefined\n    };\n    _this.initResizeObserver = function () {\n      if (typeof window.ResizeObserver === 'undefined' || !_this.containerRef) {\n        return;\n      }\n      var isFirstResize = true;\n      _this.resizeObserver = new window.ResizeObserver(function (entries) {\n        if (isFirstResize) {\n          isFirstResize = false; // observe() is called on mount, we don't want to trigger a recompute on mount\n          return;\n        }\n        _this.computeSizes();\n      });\n      _this.resizeObserver.observe(_this.containerRef);\n    };\n    // this is to prevent Safari on iOS >= 10 to zoom the page\n    _this.preventZoomSafari = function (e) {\n      return e.preventDefault();\n    };\n    _this.cleanEvents = function () {\n      if (!_this.currentDoc) return;\n      _this.currentDoc.removeEventListener('mousemove', _this.onMouseMove);\n      _this.currentDoc.removeEventListener('mouseup', _this.onDragStopped);\n      _this.currentDoc.removeEventListener('touchmove', _this.onTouchMove);\n      _this.currentDoc.removeEventListener('touchend', _this.onDragStopped);\n      _this.currentDoc.removeEventListener('gesturemove', _this.onGestureMove);\n      _this.currentDoc.removeEventListener('gestureend', _this.onGestureEnd);\n      _this.currentDoc.removeEventListener('scroll', _this.onScroll);\n    };\n    _this.clearScrollEvent = function () {\n      if (_this.containerRef) _this.containerRef.removeEventListener('wheel', _this.onWheel);\n      if (_this.wheelTimer) {\n        clearTimeout(_this.wheelTimer);\n      }\n    };\n    _this.onMediaLoad = function () {\n      var cropSize = _this.computeSizes();\n      if (cropSize) {\n        _this.emitCropData();\n        _this.setInitialCrop(cropSize);\n      }\n      if (_this.props.onMediaLoaded) {\n        _this.props.onMediaLoaded(_this.mediaSize);\n      }\n    };\n    _this.setInitialCrop = function (cropSize) {\n      if (_this.props.initialCroppedAreaPercentages) {\n        var _a = getInitialCropFromCroppedAreaPercentages(_this.props.initialCroppedAreaPercentages, _this.mediaSize, _this.props.rotation, cropSize, _this.props.minZoom, _this.props.maxZoom),\n          crop = _a.crop,\n          zoom = _a.zoom;\n        _this.props.onCropChange(crop);\n        _this.props.onZoomChange && _this.props.onZoomChange(zoom);\n      } else if (_this.props.initialCroppedAreaPixels) {\n        var _b = getInitialCropFromCroppedAreaPixels(_this.props.initialCroppedAreaPixels, _this.mediaSize, _this.props.rotation, cropSize, _this.props.minZoom, _this.props.maxZoom),\n          crop = _b.crop,\n          zoom = _b.zoom;\n        _this.props.onCropChange(crop);\n        _this.props.onZoomChange && _this.props.onZoomChange(zoom);\n      }\n    };\n    _this.computeSizes = function () {\n      var _a, _b, _c, _d, _e, _f;\n      var mediaRef = _this.imageRef.current || _this.videoRef.current;\n      if (mediaRef && _this.containerRef) {\n        _this.containerRect = _this.containerRef.getBoundingClientRect();\n        _this.saveContainerPosition();\n        var containerAspect = _this.containerRect.width / _this.containerRect.height;\n        var naturalWidth = ((_a = _this.imageRef.current) === null || _a === void 0 ? void 0 : _a.naturalWidth) || ((_b = _this.videoRef.current) === null || _b === void 0 ? void 0 : _b.videoWidth) || 0;\n        var naturalHeight = ((_c = _this.imageRef.current) === null || _c === void 0 ? void 0 : _c.naturalHeight) || ((_d = _this.videoRef.current) === null || _d === void 0 ? void 0 : _d.videoHeight) || 0;\n        var isMediaScaledDown = mediaRef.offsetWidth < naturalWidth || mediaRef.offsetHeight < naturalHeight;\n        var mediaAspect = naturalWidth / naturalHeight;\n        // We do not rely on the offsetWidth/offsetHeight if the media is scaled down\n        // as the values they report are rounded. That will result in precision losses\n        // when calculating zoom. We use the fact that the media is positionned relative\n        // to the container. That allows us to use the container's dimensions\n        // and natural aspect ratio of the media to calculate accurate media size.\n        // However, for this to work, the container should not be rotated\n        var renderedMediaSize = void 0;\n        if (isMediaScaledDown) {\n          switch (_this.state.mediaObjectFit) {\n            default:\n            case 'contain':\n              renderedMediaSize = containerAspect > mediaAspect ? {\n                width: _this.containerRect.height * mediaAspect,\n                height: _this.containerRect.height\n              } : {\n                width: _this.containerRect.width,\n                height: _this.containerRect.width / mediaAspect\n              };\n              break;\n            case 'horizontal-cover':\n              renderedMediaSize = {\n                width: _this.containerRect.width,\n                height: _this.containerRect.width / mediaAspect\n              };\n              break;\n            case 'vertical-cover':\n              renderedMediaSize = {\n                width: _this.containerRect.height * mediaAspect,\n                height: _this.containerRect.height\n              };\n              break;\n          }\n        } else {\n          renderedMediaSize = {\n            width: mediaRef.offsetWidth,\n            height: mediaRef.offsetHeight\n          };\n        }\n        _this.mediaSize = __assign(__assign({}, renderedMediaSize), {\n          naturalWidth: naturalWidth,\n          naturalHeight: naturalHeight\n        });\n        // set media size in the parent\n        if (_this.props.setMediaSize) {\n          _this.props.setMediaSize(_this.mediaSize);\n        }\n        var cropSize = _this.props.cropSize ? _this.props.cropSize : getCropSize(_this.mediaSize.width, _this.mediaSize.height, _this.containerRect.width, _this.containerRect.height, _this.props.aspect, _this.props.rotation);\n        if (((_e = _this.state.cropSize) === null || _e === void 0 ? void 0 : _e.height) !== cropSize.height || ((_f = _this.state.cropSize) === null || _f === void 0 ? void 0 : _f.width) !== cropSize.width) {\n          _this.props.onCropSizeChange && _this.props.onCropSizeChange(cropSize);\n        }\n        _this.setState({\n          cropSize: cropSize\n        }, _this.recomputeCropPosition);\n        // pass crop size to parent\n        if (_this.props.setCropSize) {\n          _this.props.setCropSize(cropSize);\n        }\n        return cropSize;\n      }\n    };\n    _this.saveContainerPosition = function () {\n      if (_this.containerRef) {\n        var bounds = _this.containerRef.getBoundingClientRect();\n        _this.containerPosition = {\n          x: bounds.left,\n          y: bounds.top\n        };\n      }\n    };\n    _this.onMouseDown = function (e) {\n      if (!_this.currentDoc) return;\n      e.preventDefault();\n      _this.currentDoc.addEventListener('mousemove', _this.onMouseMove);\n      _this.currentDoc.addEventListener('mouseup', _this.onDragStopped);\n      _this.saveContainerPosition();\n      _this.onDragStart(Cropper.getMousePoint(e));\n    };\n    _this.onMouseMove = function (e) {\n      return _this.onDrag(Cropper.getMousePoint(e));\n    };\n    _this.onScroll = function (e) {\n      if (!_this.currentDoc) return;\n      e.preventDefault();\n      _this.saveContainerPosition();\n    };\n    _this.onTouchStart = function (e) {\n      if (!_this.currentDoc) return;\n      _this.isTouching = true;\n      if (_this.props.onTouchRequest && !_this.props.onTouchRequest(e)) {\n        return;\n      }\n      _this.currentDoc.addEventListener('touchmove', _this.onTouchMove, {\n        passive: false\n      }); // iOS 11 now defaults to passive: true\n      _this.currentDoc.addEventListener('touchend', _this.onDragStopped);\n      _this.saveContainerPosition();\n      if (e.touches.length === 2) {\n        _this.onPinchStart(e);\n      } else if (e.touches.length === 1) {\n        _this.onDragStart(Cropper.getTouchPoint(e.touches[0]));\n      }\n    };\n    _this.onTouchMove = function (e) {\n      // Prevent whole page from scrolling on iOS.\n      e.preventDefault();\n      if (e.touches.length === 2) {\n        _this.onPinchMove(e);\n      } else if (e.touches.length === 1) {\n        _this.onDrag(Cropper.getTouchPoint(e.touches[0]));\n      }\n    };\n    _this.onGestureStart = function (e) {\n      if (!_this.currentDoc) return;\n      e.preventDefault();\n      _this.currentDoc.addEventListener('gesturechange', _this.onGestureMove);\n      _this.currentDoc.addEventListener('gestureend', _this.onGestureEnd);\n      _this.gestureZoomStart = _this.props.zoom;\n      _this.gestureRotationStart = _this.props.rotation;\n    };\n    _this.onGestureMove = function (e) {\n      e.preventDefault();\n      if (_this.isTouching) {\n        // this is to avoid conflict between gesture and touch events\n        return;\n      }\n      var point = Cropper.getMousePoint(e);\n      var newZoom = _this.gestureZoomStart - 1 + e.scale;\n      _this.setNewZoom(newZoom, point, {\n        shouldUpdatePosition: true\n      });\n      if (_this.props.onRotationChange) {\n        var newRotation = _this.gestureRotationStart + e.rotation;\n        _this.props.onRotationChange(newRotation);\n      }\n    };\n    _this.onGestureEnd = function (e) {\n      _this.cleanEvents();\n    };\n    _this.onDragStart = function (_a) {\n      var _b, _c;\n      var x = _a.x,\n        y = _a.y;\n      _this.dragStartPosition = {\n        x: x,\n        y: y\n      };\n      _this.dragStartCrop = __assign({}, _this.props.crop);\n      (_c = (_b = _this.props).onInteractionStart) === null || _c === void 0 ? void 0 : _c.call(_b);\n    };\n    _this.onDrag = function (_a) {\n      var x = _a.x,\n        y = _a.y;\n      if (!_this.currentWindow) return;\n      if (_this.rafDragTimeout) _this.currentWindow.cancelAnimationFrame(_this.rafDragTimeout);\n      _this.rafDragTimeout = _this.currentWindow.requestAnimationFrame(function () {\n        if (!_this.state.cropSize) return;\n        if (x === undefined || y === undefined) return;\n        var offsetX = x - _this.dragStartPosition.x;\n        var offsetY = y - _this.dragStartPosition.y;\n        var requestedPosition = {\n          x: _this.dragStartCrop.x + offsetX,\n          y: _this.dragStartCrop.y + offsetY\n        };\n        var newPosition = _this.props.restrictPosition ? restrictPosition(requestedPosition, _this.mediaSize, _this.state.cropSize, _this.props.zoom, _this.props.rotation) : requestedPosition;\n        _this.props.onCropChange(newPosition);\n      });\n    };\n    _this.onDragStopped = function () {\n      var _a, _b;\n      _this.isTouching = false;\n      _this.cleanEvents();\n      _this.emitCropData();\n      (_b = (_a = _this.props).onInteractionEnd) === null || _b === void 0 ? void 0 : _b.call(_a);\n    };\n    _this.onWheel = function (e) {\n      if (!_this.currentWindow) return;\n      if (_this.props.onWheelRequest && !_this.props.onWheelRequest(e)) {\n        return;\n      }\n      e.preventDefault();\n      var point = Cropper.getMousePoint(e);\n      var pixelY = normalizeWheel(e).pixelY;\n      var newZoom = _this.props.zoom - pixelY * _this.props.zoomSpeed / 200;\n      _this.setNewZoom(newZoom, point, {\n        shouldUpdatePosition: true\n      });\n      if (!_this.state.hasWheelJustStarted) {\n        _this.setState({\n          hasWheelJustStarted: true\n        }, function () {\n          var _a, _b;\n          return (_b = (_a = _this.props).onInteractionStart) === null || _b === void 0 ? void 0 : _b.call(_a);\n        });\n      }\n      if (_this.wheelTimer) {\n        clearTimeout(_this.wheelTimer);\n      }\n      _this.wheelTimer = _this.currentWindow.setTimeout(function () {\n        return _this.setState({\n          hasWheelJustStarted: false\n        }, function () {\n          var _a, _b;\n          return (_b = (_a = _this.props).onInteractionEnd) === null || _b === void 0 ? void 0 : _b.call(_a);\n        });\n      }, 250);\n    };\n    _this.getPointOnContainer = function (_a, containerTopLeft) {\n      var x = _a.x,\n        y = _a.y;\n      if (!_this.containerRect) {\n        throw new Error('The Cropper is not mounted');\n      }\n      return {\n        x: _this.containerRect.width / 2 - (x - containerTopLeft.x),\n        y: _this.containerRect.height / 2 - (y - containerTopLeft.y)\n      };\n    };\n    _this.getPointOnMedia = function (_a) {\n      var x = _a.x,\n        y = _a.y;\n      var _b = _this.props,\n        crop = _b.crop,\n        zoom = _b.zoom;\n      return {\n        x: (x + crop.x) / zoom,\n        y: (y + crop.y) / zoom\n      };\n    };\n    _this.setNewZoom = function (zoom, point, _a) {\n      var _b = _a === void 0 ? {} : _a,\n        _c = _b.shouldUpdatePosition,\n        shouldUpdatePosition = _c === void 0 ? true : _c;\n      if (!_this.state.cropSize || !_this.props.onZoomChange) return;\n      var newZoom = clamp(zoom, _this.props.minZoom, _this.props.maxZoom);\n      if (shouldUpdatePosition) {\n        var zoomPoint = _this.getPointOnContainer(point, _this.containerPosition);\n        var zoomTarget = _this.getPointOnMedia(zoomPoint);\n        var requestedPosition = {\n          x: zoomTarget.x * newZoom - zoomPoint.x,\n          y: zoomTarget.y * newZoom - zoomPoint.y\n        };\n        var newPosition = _this.props.restrictPosition ? restrictPosition(requestedPosition, _this.mediaSize, _this.state.cropSize, newZoom, _this.props.rotation) : requestedPosition;\n        _this.props.onCropChange(newPosition);\n      }\n      _this.props.onZoomChange(newZoom);\n    };\n    _this.getCropData = function () {\n      if (!_this.state.cropSize) {\n        return null;\n      }\n      // this is to ensure the crop is correctly restricted after a zoom back (https://github.com/ValentinH/react-easy-crop/issues/6)\n      var restrictedPosition = _this.props.restrictPosition ? restrictPosition(_this.props.crop, _this.mediaSize, _this.state.cropSize, _this.props.zoom, _this.props.rotation) : _this.props.crop;\n      return computeCroppedArea(restrictedPosition, _this.mediaSize, _this.state.cropSize, _this.getAspect(), _this.props.zoom, _this.props.rotation, _this.props.restrictPosition);\n    };\n    _this.emitCropData = function () {\n      var cropData = _this.getCropData();\n      if (!cropData) return;\n      var croppedAreaPercentages = cropData.croppedAreaPercentages,\n        croppedAreaPixels = cropData.croppedAreaPixels;\n      if (_this.props.onCropComplete) {\n        _this.props.onCropComplete(croppedAreaPercentages, croppedAreaPixels);\n      }\n      if (_this.props.onCropAreaChange) {\n        _this.props.onCropAreaChange(croppedAreaPercentages, croppedAreaPixels);\n      }\n    };\n    _this.emitCropAreaChange = function () {\n      var cropData = _this.getCropData();\n      if (!cropData) return;\n      var croppedAreaPercentages = cropData.croppedAreaPercentages,\n        croppedAreaPixels = cropData.croppedAreaPixels;\n      if (_this.props.onCropAreaChange) {\n        _this.props.onCropAreaChange(croppedAreaPercentages, croppedAreaPixels);\n      }\n    };\n    _this.recomputeCropPosition = function () {\n      if (!_this.state.cropSize) return;\n      var newPosition = _this.props.restrictPosition ? restrictPosition(_this.props.crop, _this.mediaSize, _this.state.cropSize, _this.props.zoom, _this.props.rotation) : _this.props.crop;\n      _this.props.onCropChange(newPosition);\n      _this.emitCropData();\n    };\n    _this.onKeyDown = function (event) {\n      var _a = _this.props,\n        crop = _a.crop,\n        onCropChange = _a.onCropChange,\n        keyboardStep = _a.keyboardStep,\n        zoom = _a.zoom,\n        rotation = _a.rotation;\n      var step = keyboardStep;\n      if (!_this.state.cropSize) return;\n      // if the shift key is pressed, reduce the step to allow finer control\n      if (event.shiftKey) {\n        step *= 0.2;\n      }\n      var newCrop = __assign({}, crop);\n      switch (event.key) {\n        case 'ArrowUp':\n          newCrop.y -= step;\n          event.preventDefault();\n          break;\n        case 'ArrowDown':\n          newCrop.y += step;\n          event.preventDefault();\n          break;\n        case 'ArrowLeft':\n          newCrop.x -= step;\n          event.preventDefault();\n          break;\n        case 'ArrowRight':\n          newCrop.x += step;\n          event.preventDefault();\n          break;\n        default:\n          return;\n      }\n      if (_this.props.restrictPosition) {\n        newCrop = restrictPosition(newCrop, _this.mediaSize, _this.state.cropSize, zoom, rotation);\n      }\n      onCropChange(newCrop);\n    };\n    return _this;\n  }\n  Cropper.prototype.componentDidMount = function () {\n    if (!this.currentDoc || !this.currentWindow) return;\n    if (this.containerRef) {\n      if (this.containerRef.ownerDocument) {\n        this.currentDoc = this.containerRef.ownerDocument;\n      }\n      if (this.currentDoc.defaultView) {\n        this.currentWindow = this.currentDoc.defaultView;\n      }\n      this.initResizeObserver();\n      // only add window resize listener if ResizeObserver is not supported. Otherwise, it would be redundant\n      if (typeof window.ResizeObserver === 'undefined') {\n        this.currentWindow.addEventListener('resize', this.computeSizes);\n      }\n      this.props.zoomWithScroll && this.containerRef.addEventListener('wheel', this.onWheel, {\n        passive: false\n      });\n      this.containerRef.addEventListener('gesturestart', this.onGestureStart);\n    }\n    this.currentDoc.addEventListener('scroll', this.onScroll);\n    if (!this.props.disableAutomaticStylesInjection) {\n      this.styleRef = this.currentDoc.createElement('style');\n      this.styleRef.setAttribute('type', 'text/css');\n      if (this.props.nonce) {\n        this.styleRef.setAttribute('nonce', this.props.nonce);\n      }\n      this.styleRef.innerHTML = css_248z;\n      this.currentDoc.head.appendChild(this.styleRef);\n    }\n    // when rendered via SSR, the image can already be loaded and its onLoad callback will never be called\n    if (this.imageRef.current && this.imageRef.current.complete) {\n      this.onMediaLoad();\n    }\n    // set image and video refs in the parent if the callbacks exist\n    if (this.props.setImageRef) {\n      this.props.setImageRef(this.imageRef);\n    }\n    if (this.props.setVideoRef) {\n      this.props.setVideoRef(this.videoRef);\n    }\n  };\n  Cropper.prototype.componentWillUnmount = function () {\n    var _a, _b;\n    if (!this.currentDoc || !this.currentWindow) return;\n    if (typeof window.ResizeObserver === 'undefined') {\n      this.currentWindow.removeEventListener('resize', this.computeSizes);\n    }\n    (_a = this.resizeObserver) === null || _a === void 0 ? void 0 : _a.disconnect();\n    if (this.containerRef) {\n      this.containerRef.removeEventListener('gesturestart', this.preventZoomSafari);\n    }\n    if (this.styleRef) {\n      (_b = this.styleRef.parentNode) === null || _b === void 0 ? void 0 : _b.removeChild(this.styleRef);\n    }\n    this.cleanEvents();\n    this.props.zoomWithScroll && this.clearScrollEvent();\n  };\n  Cropper.prototype.componentDidUpdate = function (prevProps) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n    if (prevProps.rotation !== this.props.rotation) {\n      this.computeSizes();\n      this.recomputeCropPosition();\n    } else if (prevProps.aspect !== this.props.aspect) {\n      this.computeSizes();\n    } else if (prevProps.objectFit !== this.props.objectFit) {\n      this.computeSizes();\n    } else if (prevProps.zoom !== this.props.zoom) {\n      this.recomputeCropPosition();\n    } else if (((_a = prevProps.cropSize) === null || _a === void 0 ? void 0 : _a.height) !== ((_b = this.props.cropSize) === null || _b === void 0 ? void 0 : _b.height) || ((_c = prevProps.cropSize) === null || _c === void 0 ? void 0 : _c.width) !== ((_d = this.props.cropSize) === null || _d === void 0 ? void 0 : _d.width)) {\n      this.computeSizes();\n    } else if (((_e = prevProps.crop) === null || _e === void 0 ? void 0 : _e.x) !== ((_f = this.props.crop) === null || _f === void 0 ? void 0 : _f.x) || ((_g = prevProps.crop) === null || _g === void 0 ? void 0 : _g.y) !== ((_h = this.props.crop) === null || _h === void 0 ? void 0 : _h.y)) {\n      this.emitCropAreaChange();\n    }\n    if (prevProps.zoomWithScroll !== this.props.zoomWithScroll && this.containerRef) {\n      this.props.zoomWithScroll ? this.containerRef.addEventListener('wheel', this.onWheel, {\n        passive: false\n      }) : this.clearScrollEvent();\n    }\n    if (prevProps.video !== this.props.video) {\n      (_j = this.videoRef.current) === null || _j === void 0 ? void 0 : _j.load();\n    }\n    var objectFit = this.getObjectFit();\n    if (objectFit !== this.state.mediaObjectFit) {\n      this.setState({\n        mediaObjectFit: objectFit\n      }, this.computeSizes);\n    }\n  };\n  Cropper.prototype.getAspect = function () {\n    var _a = this.props,\n      cropSize = _a.cropSize,\n      aspect = _a.aspect;\n    if (cropSize) {\n      return cropSize.width / cropSize.height;\n    }\n    return aspect;\n  };\n  Cropper.prototype.getObjectFit = function () {\n    var _a, _b, _c, _d;\n    if (this.props.objectFit === 'cover') {\n      var mediaRef = this.imageRef.current || this.videoRef.current;\n      if (mediaRef && this.containerRef) {\n        this.containerRect = this.containerRef.getBoundingClientRect();\n        var containerAspect = this.containerRect.width / this.containerRect.height;\n        var naturalWidth = ((_a = this.imageRef.current) === null || _a === void 0 ? void 0 : _a.naturalWidth) || ((_b = this.videoRef.current) === null || _b === void 0 ? void 0 : _b.videoWidth) || 0;\n        var naturalHeight = ((_c = this.imageRef.current) === null || _c === void 0 ? void 0 : _c.naturalHeight) || ((_d = this.videoRef.current) === null || _d === void 0 ? void 0 : _d.videoHeight) || 0;\n        var mediaAspect = naturalWidth / naturalHeight;\n        return mediaAspect < containerAspect ? 'horizontal-cover' : 'vertical-cover';\n      }\n      return 'horizontal-cover';\n    }\n    return this.props.objectFit;\n  };\n  Cropper.prototype.onPinchStart = function (e) {\n    var pointA = Cropper.getTouchPoint(e.touches[0]);\n    var pointB = Cropper.getTouchPoint(e.touches[1]);\n    this.lastPinchDistance = getDistanceBetweenPoints(pointA, pointB);\n    this.lastPinchRotation = getRotationBetweenPoints(pointA, pointB);\n    this.onDragStart(getCenter(pointA, pointB));\n  };\n  Cropper.prototype.onPinchMove = function (e) {\n    var _this = this;\n    if (!this.currentDoc || !this.currentWindow) return;\n    var pointA = Cropper.getTouchPoint(e.touches[0]);\n    var pointB = Cropper.getTouchPoint(e.touches[1]);\n    var center = getCenter(pointA, pointB);\n    this.onDrag(center);\n    if (this.rafPinchTimeout) this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout);\n    this.rafPinchTimeout = this.currentWindow.requestAnimationFrame(function () {\n      var distance = getDistanceBetweenPoints(pointA, pointB);\n      var newZoom = _this.props.zoom * (distance / _this.lastPinchDistance);\n      _this.setNewZoom(newZoom, center, {\n        shouldUpdatePosition: false\n      });\n      _this.lastPinchDistance = distance;\n      var rotation = getRotationBetweenPoints(pointA, pointB);\n      var newRotation = _this.props.rotation + (rotation - _this.lastPinchRotation);\n      _this.props.onRotationChange && _this.props.onRotationChange(newRotation);\n      _this.lastPinchRotation = rotation;\n    });\n  };\n  Cropper.prototype.render = function () {\n    var _this = this;\n    var _a;\n    var _b = this.props,\n      image = _b.image,\n      video = _b.video,\n      mediaProps = _b.mediaProps,\n      transform = _b.transform,\n      _c = _b.crop,\n      x = _c.x,\n      y = _c.y,\n      rotation = _b.rotation,\n      zoom = _b.zoom,\n      cropShape = _b.cropShape,\n      showGrid = _b.showGrid,\n      _d = _b.style,\n      containerStyle = _d.containerStyle,\n      cropAreaStyle = _d.cropAreaStyle,\n      mediaStyle = _d.mediaStyle,\n      _e = _b.classes,\n      containerClassName = _e.containerClassName,\n      cropAreaClassName = _e.cropAreaClassName,\n      mediaClassName = _e.mediaClassName;\n    var objectFit = (_a = this.state.mediaObjectFit) !== null && _a !== void 0 ? _a : this.getObjectFit();\n    return React.createElement(\"div\", {\n      onMouseDown: this.onMouseDown,\n      onTouchStart: this.onTouchStart,\n      ref: function ref(el) {\n        return _this.containerRef = el;\n      },\n      \"data-testid\": \"container\",\n      style: containerStyle,\n      className: classNames('reactEasyCrop_Container', containerClassName)\n    }, image ? React.createElement(\"img\", __assign({\n      alt: \"\",\n      className: classNames('reactEasyCrop_Image', objectFit === 'contain' && 'reactEasyCrop_Contain', objectFit === 'horizontal-cover' && 'reactEasyCrop_Cover_Horizontal', objectFit === 'vertical-cover' && 'reactEasyCrop_Cover_Vertical', mediaClassName)\n    }, mediaProps, {\n      src: image,\n      ref: this.imageRef,\n      style: __assign(__assign({}, mediaStyle), {\n        transform: transform || \"translate(\".concat(x, \"px, \").concat(y, \"px) rotate(\").concat(rotation, \"deg) scale(\").concat(zoom, \")\")\n      }),\n      onLoad: this.onMediaLoad\n    })) : video && React.createElement(\"video\", __assign({\n      autoPlay: true,\n      playsInline: true,\n      loop: true,\n      muted: true,\n      className: classNames('reactEasyCrop_Video', objectFit === 'contain' && 'reactEasyCrop_Contain', objectFit === 'horizontal-cover' && 'reactEasyCrop_Cover_Horizontal', objectFit === 'vertical-cover' && 'reactEasyCrop_Cover_Vertical', mediaClassName)\n    }, mediaProps, {\n      ref: this.videoRef,\n      onLoadedMetadata: this.onMediaLoad,\n      style: __assign(__assign({}, mediaStyle), {\n        transform: transform || \"translate(\".concat(x, \"px, \").concat(y, \"px) rotate(\").concat(rotation, \"deg) scale(\").concat(zoom, \")\")\n      }),\n      controls: false\n    }), (Array.isArray(video) ? video : [{\n      src: video\n    }]).map(function (item) {\n      return React.createElement(\"source\", __assign({\n        key: item.src\n      }, item));\n    })), this.state.cropSize && React.createElement(\"div\", {\n      style: __assign(__assign({}, cropAreaStyle), {\n        width: this.state.cropSize.width,\n        height: this.state.cropSize.height\n      }),\n      tabIndex: 0,\n      onKeyDown: this.onKeyDown,\n      \"data-testid\": \"cropper\",\n      className: classNames('reactEasyCrop_CropArea', cropShape === 'round' && 'reactEasyCrop_CropAreaRound', showGrid && 'reactEasyCrop_CropAreaGrid', cropAreaClassName)\n    }));\n  };\n  Cropper.defaultProps = {\n    zoom: 1,\n    rotation: 0,\n    aspect: 4 / 3,\n    maxZoom: MAX_ZOOM,\n    minZoom: MIN_ZOOM,\n    cropShape: 'rect',\n    objectFit: 'contain',\n    showGrid: true,\n    style: {},\n    classes: {},\n    mediaProps: {},\n    zoomSpeed: 1,\n    restrictPosition: true,\n    zoomWithScroll: true,\n    keyboardStep: KEYBOARD_STEP\n  };\n  Cropper.getMousePoint = function (e) {\n    return {\n      x: Number(e.clientX),\n      y: Number(e.clientY)\n    };\n  };\n  Cropper.getTouchPoint = function (touch) {\n    return {\n      x: Number(touch.clientX),\n      y: Number(touch.clientY)\n    };\n  };\n  return Cropper;\n}(React.Component);\nexport { Cropper as default, getInitialCropFromCroppedAreaPercentages, getInitialCropFromCroppedAreaPixels };","map":{"version":3,"names":["__assign","__extends","React","normalizeWheel","getCropSize","mediaWidth","mediaHeight","containerWidth","containerHeight","aspect","rotation","_a","rotateSize","width","height","fittingWidth","Math","min","fittingHeight","getMediaZoom","mediaSize","naturalWidth","naturalHeight","restrictPosition","position","cropSize","zoom","x","restrictPositionCoord","y","maxPosition","clamp","getDistanceBetweenPoints","pointA","pointB","sqrt","pow","getRotationBetweenPoints","atan2","PI","computeCroppedArea","crop","limitAreaFn","limitArea","noOp","mediaBBoxSize","mediaNaturalBBoxSize","croppedAreaPercentages","widthInPixels","round","heightInPixels","isImgWiderThanHigh","sizePixels","croppedAreaPixels","max","value","_max","getInitialCropFromCroppedAreaPercentages","minZoom","maxZoom","getZoomFromCroppedAreaPixels","mediaZoom","getInitialCropFromCroppedAreaPixels","cropZoom","getCenter","a","b","getRadianAngle","degreeValue","rotRad","abs","cos","sin","classNames","args","_i","arguments","length","filter","join","trim","css_248z","MIN_ZOOM","MAX_ZOOM","KEYBOARD_STEP","Cropper","_super","_this","apply","imageRef","createRef","videoRef","containerPosition","containerRef","styleRef","containerRect","dragStartPosition","dragStartCrop","gestureZoomStart","gestureRotationStart","isTouching","lastPinchDistance","lastPinchRotation","rafDragTimeout","rafPinchTimeout","wheelTimer","currentDoc","document","currentWindow","window","resizeObserver","state","hasWheelJustStarted","mediaObjectFit","undefined","initResizeObserver","ResizeObserver","isFirstResize","entries","computeSizes","observe","preventZoomSafari","e","preventDefault","cleanEvents","removeEventListener","onMouseMove","onDragStopped","onTouchMove","onGestureMove","onGestureEnd","onScroll","clearScrollEvent","onWheel","clearTimeout","onMediaLoad","emitCropData","setInitialCrop","props","onMediaLoaded","initialCroppedAreaPercentages","onCropChange","onZoomChange","initialCroppedAreaPixels","_b","_c","_d","_e","_f","mediaRef","current","getBoundingClientRect","saveContainerPosition","containerAspect","videoWidth","videoHeight","isMediaScaledDown","offsetWidth","offsetHeight","mediaAspect","renderedMediaSize","setMediaSize","onCropSizeChange","setState","recomputeCropPosition","setCropSize","bounds","left","top","onMouseDown","addEventListener","onDragStart","getMousePoint","onDrag","onTouchStart","onTouchRequest","passive","touches","onPinchStart","getTouchPoint","onPinchMove","onGestureStart","point","newZoom","scale","setNewZoom","shouldUpdatePosition","onRotationChange","newRotation","onInteractionStart","call","cancelAnimationFrame","requestAnimationFrame","offsetX","offsetY","requestedPosition","newPosition","onInteractionEnd","onWheelRequest","pixelY","zoomSpeed","setTimeout","getPointOnContainer","containerTopLeft","Error","getPointOnMedia","zoomPoint","zoomTarget","getCropData","restrictedPosition","getAspect","cropData","onCropComplete","onCropAreaChange","emitCropAreaChange","onKeyDown","event","keyboardStep","step","shiftKey","newCrop","key","prototype","componentDidMount","ownerDocument","defaultView","zoomWithScroll","disableAutomaticStylesInjection","createElement","setAttribute","nonce","innerHTML","head","appendChild","complete","setImageRef","setVideoRef","componentWillUnmount","disconnect","parentNode","removeChild","componentDidUpdate","prevProps","_g","_h","_j","objectFit","video","load","getObjectFit","center","distance","render","image","mediaProps","transform","cropShape","showGrid","style","containerStyle","cropAreaStyle","mediaStyle","classes","containerClassName","cropAreaClassName","mediaClassName","ref","el","className","alt","src","concat","onLoad","autoPlay","playsInline","loop","muted","onLoadedMetadata","controls","Array","isArray","map","item","tabIndex","defaultProps","Number","clientX","clientY","touch","Component","default"],"sources":["E:/cslearning_sophomore/project/frontpages/node_modules/react-easy-crop/index.module.js"],"sourcesContent":["import { __assign, __extends } from 'tslib';\nimport * as React from 'react';\nimport normalizeWheel from 'normalize-wheel';\n\n/**\r\n * Compute the dimension of the crop area based on media size,\r\n * aspect ratio and optionally rotation\r\n */\nfunction getCropSize(mediaWidth, mediaHeight, containerWidth, containerHeight, aspect, rotation) {\n  if (rotation === void 0) {\n    rotation = 0;\n  }\n  var _a = rotateSize(mediaWidth, mediaHeight, rotation),\n    width = _a.width,\n    height = _a.height;\n  var fittingWidth = Math.min(width, containerWidth);\n  var fittingHeight = Math.min(height, containerHeight);\n  if (fittingWidth > fittingHeight * aspect) {\n    return {\n      width: fittingHeight * aspect,\n      height: fittingHeight\n    };\n  }\n  return {\n    width: fittingWidth,\n    height: fittingWidth / aspect\n  };\n}\n/**\r\n * Compute media zoom.\r\n * We fit the media into the container with \"max-width: 100%; max-height: 100%;\"\r\n */\nfunction getMediaZoom(mediaSize) {\n  // Take the axis with more pixels to improve accuracy\n  return mediaSize.width > mediaSize.height ? mediaSize.width / mediaSize.naturalWidth : mediaSize.height / mediaSize.naturalHeight;\n}\n/**\r\n * Ensure a new media position stays in the crop area.\r\n */\nfunction restrictPosition(position, mediaSize, cropSize, zoom, rotation) {\n  if (rotation === void 0) {\n    rotation = 0;\n  }\n  var _a = rotateSize(mediaSize.width, mediaSize.height, rotation),\n    width = _a.width,\n    height = _a.height;\n  return {\n    x: restrictPositionCoord(position.x, width, cropSize.width, zoom),\n    y: restrictPositionCoord(position.y, height, cropSize.height, zoom)\n  };\n}\nfunction restrictPositionCoord(position, mediaSize, cropSize, zoom) {\n  var maxPosition = mediaSize * zoom / 2 - cropSize / 2;\n  return clamp(position, -maxPosition, maxPosition);\n}\nfunction getDistanceBetweenPoints(pointA, pointB) {\n  return Math.sqrt(Math.pow(pointA.y - pointB.y, 2) + Math.pow(pointA.x - pointB.x, 2));\n}\nfunction getRotationBetweenPoints(pointA, pointB) {\n  return Math.atan2(pointB.y - pointA.y, pointB.x - pointA.x) * 180 / Math.PI;\n}\n/**\r\n * Compute the output cropped area of the media in percentages and pixels.\r\n * x/y are the top-left coordinates on the src media\r\n */\nfunction computeCroppedArea(crop, mediaSize, cropSize, aspect, zoom, rotation, restrictPosition) {\n  if (rotation === void 0) {\n    rotation = 0;\n  }\n  if (restrictPosition === void 0) {\n    restrictPosition = true;\n  }\n  // if the media is rotated by the user, we cannot limit the position anymore\n  // as it might need to be negative.\n  var limitAreaFn = restrictPosition ? limitArea : noOp;\n  var mediaBBoxSize = rotateSize(mediaSize.width, mediaSize.height, rotation);\n  var mediaNaturalBBoxSize = rotateSize(mediaSize.naturalWidth, mediaSize.naturalHeight, rotation);\n  // calculate the crop area in percentages\n  // in the rotated space\n  var croppedAreaPercentages = {\n    x: limitAreaFn(100, ((mediaBBoxSize.width - cropSize.width / zoom) / 2 - crop.x / zoom) / mediaBBoxSize.width * 100),\n    y: limitAreaFn(100, ((mediaBBoxSize.height - cropSize.height / zoom) / 2 - crop.y / zoom) / mediaBBoxSize.height * 100),\n    width: limitAreaFn(100, cropSize.width / mediaBBoxSize.width * 100 / zoom),\n    height: limitAreaFn(100, cropSize.height / mediaBBoxSize.height * 100 / zoom)\n  };\n  // we compute the pixels size naively\n  var widthInPixels = Math.round(limitAreaFn(mediaNaturalBBoxSize.width, croppedAreaPercentages.width * mediaNaturalBBoxSize.width / 100));\n  var heightInPixels = Math.round(limitAreaFn(mediaNaturalBBoxSize.height, croppedAreaPercentages.height * mediaNaturalBBoxSize.height / 100));\n  var isImgWiderThanHigh = mediaNaturalBBoxSize.width >= mediaNaturalBBoxSize.height * aspect;\n  // then we ensure the width and height exactly match the aspect (to avoid rounding approximations)\n  // if the media is wider than high, when zoom is 0, the crop height will be equals to image height\n  // thus we want to compute the width from the height and aspect for accuracy.\n  // Otherwise, we compute the height from width and aspect.\n  var sizePixels = isImgWiderThanHigh ? {\n    width: Math.round(heightInPixels * aspect),\n    height: heightInPixels\n  } : {\n    width: widthInPixels,\n    height: Math.round(widthInPixels / aspect)\n  };\n  var croppedAreaPixels = __assign(__assign({}, sizePixels), {\n    x: Math.round(limitAreaFn(mediaNaturalBBoxSize.width - sizePixels.width, croppedAreaPercentages.x * mediaNaturalBBoxSize.width / 100)),\n    y: Math.round(limitAreaFn(mediaNaturalBBoxSize.height - sizePixels.height, croppedAreaPercentages.y * mediaNaturalBBoxSize.height / 100))\n  });\n  return {\n    croppedAreaPercentages: croppedAreaPercentages,\n    croppedAreaPixels: croppedAreaPixels\n  };\n}\n/**\r\n * Ensure the returned value is between 0 and max\r\n */\nfunction limitArea(max, value) {\n  return Math.min(max, Math.max(0, value));\n}\nfunction noOp(_max, value) {\n  return value;\n}\n/**\r\n * Compute crop and zoom from the croppedAreaPercentages.\r\n */\nfunction getInitialCropFromCroppedAreaPercentages(croppedAreaPercentages, mediaSize, rotation, cropSize, minZoom, maxZoom) {\n  var mediaBBoxSize = rotateSize(mediaSize.width, mediaSize.height, rotation);\n  // This is the inverse process of computeCroppedArea\n  var zoom = clamp(cropSize.width / mediaBBoxSize.width * (100 / croppedAreaPercentages.width), minZoom, maxZoom);\n  var crop = {\n    x: zoom * mediaBBoxSize.width / 2 - cropSize.width / 2 - mediaBBoxSize.width * zoom * (croppedAreaPercentages.x / 100),\n    y: zoom * mediaBBoxSize.height / 2 - cropSize.height / 2 - mediaBBoxSize.height * zoom * (croppedAreaPercentages.y / 100)\n  };\n  return {\n    crop: crop,\n    zoom: zoom\n  };\n}\n/**\r\n * Compute zoom from the croppedAreaPixels\r\n */\nfunction getZoomFromCroppedAreaPixels(croppedAreaPixels, mediaSize, cropSize) {\n  var mediaZoom = getMediaZoom(mediaSize);\n  return cropSize.height > cropSize.width ? cropSize.height / (croppedAreaPixels.height * mediaZoom) : cropSize.width / (croppedAreaPixels.width * mediaZoom);\n}\n/**\r\n * Compute crop and zoom from the croppedAreaPixels\r\n */\nfunction getInitialCropFromCroppedAreaPixels(croppedAreaPixels, mediaSize, rotation, cropSize, minZoom, maxZoom) {\n  if (rotation === void 0) {\n    rotation = 0;\n  }\n  var mediaNaturalBBoxSize = rotateSize(mediaSize.naturalWidth, mediaSize.naturalHeight, rotation);\n  var zoom = clamp(getZoomFromCroppedAreaPixels(croppedAreaPixels, mediaSize, cropSize), minZoom, maxZoom);\n  var cropZoom = cropSize.height > cropSize.width ? cropSize.height / croppedAreaPixels.height : cropSize.width / croppedAreaPixels.width;\n  var crop = {\n    x: ((mediaNaturalBBoxSize.width - croppedAreaPixels.width) / 2 - croppedAreaPixels.x) * cropZoom,\n    y: ((mediaNaturalBBoxSize.height - croppedAreaPixels.height) / 2 - croppedAreaPixels.y) * cropZoom\n  };\n  return {\n    crop: crop,\n    zoom: zoom\n  };\n}\n/**\r\n * Return the point that is the center of point a and b\r\n */\nfunction getCenter(a, b) {\n  return {\n    x: (b.x + a.x) / 2,\n    y: (b.y + a.y) / 2\n  };\n}\nfunction getRadianAngle(degreeValue) {\n  return degreeValue * Math.PI / 180;\n}\n/**\r\n * Returns the new bounding area of a rotated rectangle.\r\n */\nfunction rotateSize(width, height, rotation) {\n  var rotRad = getRadianAngle(rotation);\n  return {\n    width: Math.abs(Math.cos(rotRad) * width) + Math.abs(Math.sin(rotRad) * height),\n    height: Math.abs(Math.sin(rotRad) * width) + Math.abs(Math.cos(rotRad) * height)\n  };\n}\n/**\r\n * Clamp value between min and max\r\n */\nfunction clamp(value, min, max) {\n  return Math.min(Math.max(value, min), max);\n}\n/**\r\n * Combine multiple class names into a single string.\r\n */\nfunction classNames() {\n  var args = [];\n  for (var _i = 0; _i < arguments.length; _i++) {\n    args[_i] = arguments[_i];\n  }\n  return args.filter(function (value) {\n    if (typeof value === 'string' && value.length > 0) {\n      return true;\n    }\n    return false;\n  }).join(' ').trim();\n}\n\nvar css_248z = \".reactEasyCrop_Container {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  overflow: hidden;\\n  user-select: none;\\n  touch-action: none;\\n  cursor: move;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n}\\n\\n.reactEasyCrop_Image,\\n.reactEasyCrop_Video {\\n  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */\\n}\\n\\n.reactEasyCrop_Contain {\\n  max-width: 100%;\\n  max-height: 100%;\\n  margin: auto;\\n  position: absolute;\\n  top: 0;\\n  bottom: 0;\\n  left: 0;\\n  right: 0;\\n}\\n.reactEasyCrop_Cover_Horizontal {\\n  width: 100%;\\n  height: auto;\\n}\\n.reactEasyCrop_Cover_Vertical {\\n  width: auto;\\n  height: 100%;\\n}\\n\\n.reactEasyCrop_CropArea {\\n  position: absolute;\\n  left: 50%;\\n  top: 50%;\\n  transform: translate(-50%, -50%);\\n  border: 1px solid rgba(255, 255, 255, 0.5);\\n  box-sizing: border-box;\\n  box-shadow: 0 0 0 9999em;\\n  color: rgba(0, 0, 0, 0.5);\\n  overflow: hidden;\\n}\\n\\n.reactEasyCrop_CropAreaRound {\\n  border-radius: 50%;\\n}\\n\\n.reactEasyCrop_CropAreaGrid::before {\\n  content: ' ';\\n  box-sizing: border-box;\\n  position: absolute;\\n  border: 1px solid rgba(255, 255, 255, 0.5);\\n  top: 0;\\n  bottom: 0;\\n  left: 33.33%;\\n  right: 33.33%;\\n  border-top: 0;\\n  border-bottom: 0;\\n}\\n\\n.reactEasyCrop_CropAreaGrid::after {\\n  content: ' ';\\n  box-sizing: border-box;\\n  position: absolute;\\n  border: 1px solid rgba(255, 255, 255, 0.5);\\n  top: 33.33%;\\n  bottom: 33.33%;\\n  left: 0;\\n  right: 0;\\n  border-left: 0;\\n  border-right: 0;\\n}\\n\";\n\nvar MIN_ZOOM = 1;\nvar MAX_ZOOM = 3;\nvar KEYBOARD_STEP = 1;\nvar Cropper = /** @class */function (_super) {\n  __extends(Cropper, _super);\n  function Cropper() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    _this.imageRef = React.createRef();\n    _this.videoRef = React.createRef();\n    _this.containerPosition = {\n      x: 0,\n      y: 0\n    };\n    _this.containerRef = null;\n    _this.styleRef = null;\n    _this.containerRect = null;\n    _this.mediaSize = {\n      width: 0,\n      height: 0,\n      naturalWidth: 0,\n      naturalHeight: 0\n    };\n    _this.dragStartPosition = {\n      x: 0,\n      y: 0\n    };\n    _this.dragStartCrop = {\n      x: 0,\n      y: 0\n    };\n    _this.gestureZoomStart = 0;\n    _this.gestureRotationStart = 0;\n    _this.isTouching = false;\n    _this.lastPinchDistance = 0;\n    _this.lastPinchRotation = 0;\n    _this.rafDragTimeout = null;\n    _this.rafPinchTimeout = null;\n    _this.wheelTimer = null;\n    _this.currentDoc = typeof document !== 'undefined' ? document : null;\n    _this.currentWindow = typeof window !== 'undefined' ? window : null;\n    _this.resizeObserver = null;\n    _this.state = {\n      cropSize: null,\n      hasWheelJustStarted: false,\n      mediaObjectFit: undefined\n    };\n    _this.initResizeObserver = function () {\n      if (typeof window.ResizeObserver === 'undefined' || !_this.containerRef) {\n        return;\n      }\n      var isFirstResize = true;\n      _this.resizeObserver = new window.ResizeObserver(function (entries) {\n        if (isFirstResize) {\n          isFirstResize = false; // observe() is called on mount, we don't want to trigger a recompute on mount\n          return;\n        }\n        _this.computeSizes();\n      });\n      _this.resizeObserver.observe(_this.containerRef);\n    };\n    // this is to prevent Safari on iOS >= 10 to zoom the page\n    _this.preventZoomSafari = function (e) {\n      return e.preventDefault();\n    };\n    _this.cleanEvents = function () {\n      if (!_this.currentDoc) return;\n      _this.currentDoc.removeEventListener('mousemove', _this.onMouseMove);\n      _this.currentDoc.removeEventListener('mouseup', _this.onDragStopped);\n      _this.currentDoc.removeEventListener('touchmove', _this.onTouchMove);\n      _this.currentDoc.removeEventListener('touchend', _this.onDragStopped);\n      _this.currentDoc.removeEventListener('gesturemove', _this.onGestureMove);\n      _this.currentDoc.removeEventListener('gestureend', _this.onGestureEnd);\n      _this.currentDoc.removeEventListener('scroll', _this.onScroll);\n    };\n    _this.clearScrollEvent = function () {\n      if (_this.containerRef) _this.containerRef.removeEventListener('wheel', _this.onWheel);\n      if (_this.wheelTimer) {\n        clearTimeout(_this.wheelTimer);\n      }\n    };\n    _this.onMediaLoad = function () {\n      var cropSize = _this.computeSizes();\n      if (cropSize) {\n        _this.emitCropData();\n        _this.setInitialCrop(cropSize);\n      }\n      if (_this.props.onMediaLoaded) {\n        _this.props.onMediaLoaded(_this.mediaSize);\n      }\n    };\n    _this.setInitialCrop = function (cropSize) {\n      if (_this.props.initialCroppedAreaPercentages) {\n        var _a = getInitialCropFromCroppedAreaPercentages(_this.props.initialCroppedAreaPercentages, _this.mediaSize, _this.props.rotation, cropSize, _this.props.minZoom, _this.props.maxZoom),\n          crop = _a.crop,\n          zoom = _a.zoom;\n        _this.props.onCropChange(crop);\n        _this.props.onZoomChange && _this.props.onZoomChange(zoom);\n      } else if (_this.props.initialCroppedAreaPixels) {\n        var _b = getInitialCropFromCroppedAreaPixels(_this.props.initialCroppedAreaPixels, _this.mediaSize, _this.props.rotation, cropSize, _this.props.minZoom, _this.props.maxZoom),\n          crop = _b.crop,\n          zoom = _b.zoom;\n        _this.props.onCropChange(crop);\n        _this.props.onZoomChange && _this.props.onZoomChange(zoom);\n      }\n    };\n    _this.computeSizes = function () {\n      var _a, _b, _c, _d, _e, _f;\n      var mediaRef = _this.imageRef.current || _this.videoRef.current;\n      if (mediaRef && _this.containerRef) {\n        _this.containerRect = _this.containerRef.getBoundingClientRect();\n        _this.saveContainerPosition();\n        var containerAspect = _this.containerRect.width / _this.containerRect.height;\n        var naturalWidth = ((_a = _this.imageRef.current) === null || _a === void 0 ? void 0 : _a.naturalWidth) || ((_b = _this.videoRef.current) === null || _b === void 0 ? void 0 : _b.videoWidth) || 0;\n        var naturalHeight = ((_c = _this.imageRef.current) === null || _c === void 0 ? void 0 : _c.naturalHeight) || ((_d = _this.videoRef.current) === null || _d === void 0 ? void 0 : _d.videoHeight) || 0;\n        var isMediaScaledDown = mediaRef.offsetWidth < naturalWidth || mediaRef.offsetHeight < naturalHeight;\n        var mediaAspect = naturalWidth / naturalHeight;\n        // We do not rely on the offsetWidth/offsetHeight if the media is scaled down\n        // as the values they report are rounded. That will result in precision losses\n        // when calculating zoom. We use the fact that the media is positionned relative\n        // to the container. That allows us to use the container's dimensions\n        // and natural aspect ratio of the media to calculate accurate media size.\n        // However, for this to work, the container should not be rotated\n        var renderedMediaSize = void 0;\n        if (isMediaScaledDown) {\n          switch (_this.state.mediaObjectFit) {\n            default:\n            case 'contain':\n              renderedMediaSize = containerAspect > mediaAspect ? {\n                width: _this.containerRect.height * mediaAspect,\n                height: _this.containerRect.height\n              } : {\n                width: _this.containerRect.width,\n                height: _this.containerRect.width / mediaAspect\n              };\n              break;\n            case 'horizontal-cover':\n              renderedMediaSize = {\n                width: _this.containerRect.width,\n                height: _this.containerRect.width / mediaAspect\n              };\n              break;\n            case 'vertical-cover':\n              renderedMediaSize = {\n                width: _this.containerRect.height * mediaAspect,\n                height: _this.containerRect.height\n              };\n              break;\n          }\n        } else {\n          renderedMediaSize = {\n            width: mediaRef.offsetWidth,\n            height: mediaRef.offsetHeight\n          };\n        }\n        _this.mediaSize = __assign(__assign({}, renderedMediaSize), {\n          naturalWidth: naturalWidth,\n          naturalHeight: naturalHeight\n        });\n        // set media size in the parent\n        if (_this.props.setMediaSize) {\n          _this.props.setMediaSize(_this.mediaSize);\n        }\n        var cropSize = _this.props.cropSize ? _this.props.cropSize : getCropSize(_this.mediaSize.width, _this.mediaSize.height, _this.containerRect.width, _this.containerRect.height, _this.props.aspect, _this.props.rotation);\n        if (((_e = _this.state.cropSize) === null || _e === void 0 ? void 0 : _e.height) !== cropSize.height || ((_f = _this.state.cropSize) === null || _f === void 0 ? void 0 : _f.width) !== cropSize.width) {\n          _this.props.onCropSizeChange && _this.props.onCropSizeChange(cropSize);\n        }\n        _this.setState({\n          cropSize: cropSize\n        }, _this.recomputeCropPosition);\n        // pass crop size to parent\n        if (_this.props.setCropSize) {\n          _this.props.setCropSize(cropSize);\n        }\n        return cropSize;\n      }\n    };\n    _this.saveContainerPosition = function () {\n      if (_this.containerRef) {\n        var bounds = _this.containerRef.getBoundingClientRect();\n        _this.containerPosition = {\n          x: bounds.left,\n          y: bounds.top\n        };\n      }\n    };\n    _this.onMouseDown = function (e) {\n      if (!_this.currentDoc) return;\n      e.preventDefault();\n      _this.currentDoc.addEventListener('mousemove', _this.onMouseMove);\n      _this.currentDoc.addEventListener('mouseup', _this.onDragStopped);\n      _this.saveContainerPosition();\n      _this.onDragStart(Cropper.getMousePoint(e));\n    };\n    _this.onMouseMove = function (e) {\n      return _this.onDrag(Cropper.getMousePoint(e));\n    };\n    _this.onScroll = function (e) {\n      if (!_this.currentDoc) return;\n      e.preventDefault();\n      _this.saveContainerPosition();\n    };\n    _this.onTouchStart = function (e) {\n      if (!_this.currentDoc) return;\n      _this.isTouching = true;\n      if (_this.props.onTouchRequest && !_this.props.onTouchRequest(e)) {\n        return;\n      }\n      _this.currentDoc.addEventListener('touchmove', _this.onTouchMove, {\n        passive: false\n      }); // iOS 11 now defaults to passive: true\n      _this.currentDoc.addEventListener('touchend', _this.onDragStopped);\n      _this.saveContainerPosition();\n      if (e.touches.length === 2) {\n        _this.onPinchStart(e);\n      } else if (e.touches.length === 1) {\n        _this.onDragStart(Cropper.getTouchPoint(e.touches[0]));\n      }\n    };\n    _this.onTouchMove = function (e) {\n      // Prevent whole page from scrolling on iOS.\n      e.preventDefault();\n      if (e.touches.length === 2) {\n        _this.onPinchMove(e);\n      } else if (e.touches.length === 1) {\n        _this.onDrag(Cropper.getTouchPoint(e.touches[0]));\n      }\n    };\n    _this.onGestureStart = function (e) {\n      if (!_this.currentDoc) return;\n      e.preventDefault();\n      _this.currentDoc.addEventListener('gesturechange', _this.onGestureMove);\n      _this.currentDoc.addEventListener('gestureend', _this.onGestureEnd);\n      _this.gestureZoomStart = _this.props.zoom;\n      _this.gestureRotationStart = _this.props.rotation;\n    };\n    _this.onGestureMove = function (e) {\n      e.preventDefault();\n      if (_this.isTouching) {\n        // this is to avoid conflict between gesture and touch events\n        return;\n      }\n      var point = Cropper.getMousePoint(e);\n      var newZoom = _this.gestureZoomStart - 1 + e.scale;\n      _this.setNewZoom(newZoom, point, {\n        shouldUpdatePosition: true\n      });\n      if (_this.props.onRotationChange) {\n        var newRotation = _this.gestureRotationStart + e.rotation;\n        _this.props.onRotationChange(newRotation);\n      }\n    };\n    _this.onGestureEnd = function (e) {\n      _this.cleanEvents();\n    };\n    _this.onDragStart = function (_a) {\n      var _b, _c;\n      var x = _a.x,\n        y = _a.y;\n      _this.dragStartPosition = {\n        x: x,\n        y: y\n      };\n      _this.dragStartCrop = __assign({}, _this.props.crop);\n      (_c = (_b = _this.props).onInteractionStart) === null || _c === void 0 ? void 0 : _c.call(_b);\n    };\n    _this.onDrag = function (_a) {\n      var x = _a.x,\n        y = _a.y;\n      if (!_this.currentWindow) return;\n      if (_this.rafDragTimeout) _this.currentWindow.cancelAnimationFrame(_this.rafDragTimeout);\n      _this.rafDragTimeout = _this.currentWindow.requestAnimationFrame(function () {\n        if (!_this.state.cropSize) return;\n        if (x === undefined || y === undefined) return;\n        var offsetX = x - _this.dragStartPosition.x;\n        var offsetY = y - _this.dragStartPosition.y;\n        var requestedPosition = {\n          x: _this.dragStartCrop.x + offsetX,\n          y: _this.dragStartCrop.y + offsetY\n        };\n        var newPosition = _this.props.restrictPosition ? restrictPosition(requestedPosition, _this.mediaSize, _this.state.cropSize, _this.props.zoom, _this.props.rotation) : requestedPosition;\n        _this.props.onCropChange(newPosition);\n      });\n    };\n    _this.onDragStopped = function () {\n      var _a, _b;\n      _this.isTouching = false;\n      _this.cleanEvents();\n      _this.emitCropData();\n      (_b = (_a = _this.props).onInteractionEnd) === null || _b === void 0 ? void 0 : _b.call(_a);\n    };\n    _this.onWheel = function (e) {\n      if (!_this.currentWindow) return;\n      if (_this.props.onWheelRequest && !_this.props.onWheelRequest(e)) {\n        return;\n      }\n      e.preventDefault();\n      var point = Cropper.getMousePoint(e);\n      var pixelY = normalizeWheel(e).pixelY;\n      var newZoom = _this.props.zoom - pixelY * _this.props.zoomSpeed / 200;\n      _this.setNewZoom(newZoom, point, {\n        shouldUpdatePosition: true\n      });\n      if (!_this.state.hasWheelJustStarted) {\n        _this.setState({\n          hasWheelJustStarted: true\n        }, function () {\n          var _a, _b;\n          return (_b = (_a = _this.props).onInteractionStart) === null || _b === void 0 ? void 0 : _b.call(_a);\n        });\n      }\n      if (_this.wheelTimer) {\n        clearTimeout(_this.wheelTimer);\n      }\n      _this.wheelTimer = _this.currentWindow.setTimeout(function () {\n        return _this.setState({\n          hasWheelJustStarted: false\n        }, function () {\n          var _a, _b;\n          return (_b = (_a = _this.props).onInteractionEnd) === null || _b === void 0 ? void 0 : _b.call(_a);\n        });\n      }, 250);\n    };\n    _this.getPointOnContainer = function (_a, containerTopLeft) {\n      var x = _a.x,\n        y = _a.y;\n      if (!_this.containerRect) {\n        throw new Error('The Cropper is not mounted');\n      }\n      return {\n        x: _this.containerRect.width / 2 - (x - containerTopLeft.x),\n        y: _this.containerRect.height / 2 - (y - containerTopLeft.y)\n      };\n    };\n    _this.getPointOnMedia = function (_a) {\n      var x = _a.x,\n        y = _a.y;\n      var _b = _this.props,\n        crop = _b.crop,\n        zoom = _b.zoom;\n      return {\n        x: (x + crop.x) / zoom,\n        y: (y + crop.y) / zoom\n      };\n    };\n    _this.setNewZoom = function (zoom, point, _a) {\n      var _b = _a === void 0 ? {} : _a,\n        _c = _b.shouldUpdatePosition,\n        shouldUpdatePosition = _c === void 0 ? true : _c;\n      if (!_this.state.cropSize || !_this.props.onZoomChange) return;\n      var newZoom = clamp(zoom, _this.props.minZoom, _this.props.maxZoom);\n      if (shouldUpdatePosition) {\n        var zoomPoint = _this.getPointOnContainer(point, _this.containerPosition);\n        var zoomTarget = _this.getPointOnMedia(zoomPoint);\n        var requestedPosition = {\n          x: zoomTarget.x * newZoom - zoomPoint.x,\n          y: zoomTarget.y * newZoom - zoomPoint.y\n        };\n        var newPosition = _this.props.restrictPosition ? restrictPosition(requestedPosition, _this.mediaSize, _this.state.cropSize, newZoom, _this.props.rotation) : requestedPosition;\n        _this.props.onCropChange(newPosition);\n      }\n      _this.props.onZoomChange(newZoom);\n    };\n    _this.getCropData = function () {\n      if (!_this.state.cropSize) {\n        return null;\n      }\n      // this is to ensure the crop is correctly restricted after a zoom back (https://github.com/ValentinH/react-easy-crop/issues/6)\n      var restrictedPosition = _this.props.restrictPosition ? restrictPosition(_this.props.crop, _this.mediaSize, _this.state.cropSize, _this.props.zoom, _this.props.rotation) : _this.props.crop;\n      return computeCroppedArea(restrictedPosition, _this.mediaSize, _this.state.cropSize, _this.getAspect(), _this.props.zoom, _this.props.rotation, _this.props.restrictPosition);\n    };\n    _this.emitCropData = function () {\n      var cropData = _this.getCropData();\n      if (!cropData) return;\n      var croppedAreaPercentages = cropData.croppedAreaPercentages,\n        croppedAreaPixels = cropData.croppedAreaPixels;\n      if (_this.props.onCropComplete) {\n        _this.props.onCropComplete(croppedAreaPercentages, croppedAreaPixels);\n      }\n      if (_this.props.onCropAreaChange) {\n        _this.props.onCropAreaChange(croppedAreaPercentages, croppedAreaPixels);\n      }\n    };\n    _this.emitCropAreaChange = function () {\n      var cropData = _this.getCropData();\n      if (!cropData) return;\n      var croppedAreaPercentages = cropData.croppedAreaPercentages,\n        croppedAreaPixels = cropData.croppedAreaPixels;\n      if (_this.props.onCropAreaChange) {\n        _this.props.onCropAreaChange(croppedAreaPercentages, croppedAreaPixels);\n      }\n    };\n    _this.recomputeCropPosition = function () {\n      if (!_this.state.cropSize) return;\n      var newPosition = _this.props.restrictPosition ? restrictPosition(_this.props.crop, _this.mediaSize, _this.state.cropSize, _this.props.zoom, _this.props.rotation) : _this.props.crop;\n      _this.props.onCropChange(newPosition);\n      _this.emitCropData();\n    };\n    _this.onKeyDown = function (event) {\n      var _a = _this.props,\n        crop = _a.crop,\n        onCropChange = _a.onCropChange,\n        keyboardStep = _a.keyboardStep,\n        zoom = _a.zoom,\n        rotation = _a.rotation;\n      var step = keyboardStep;\n      if (!_this.state.cropSize) return;\n      // if the shift key is pressed, reduce the step to allow finer control\n      if (event.shiftKey) {\n        step *= 0.2;\n      }\n      var newCrop = __assign({}, crop);\n      switch (event.key) {\n        case 'ArrowUp':\n          newCrop.y -= step;\n          event.preventDefault();\n          break;\n        case 'ArrowDown':\n          newCrop.y += step;\n          event.preventDefault();\n          break;\n        case 'ArrowLeft':\n          newCrop.x -= step;\n          event.preventDefault();\n          break;\n        case 'ArrowRight':\n          newCrop.x += step;\n          event.preventDefault();\n          break;\n        default:\n          return;\n      }\n      if (_this.props.restrictPosition) {\n        newCrop = restrictPosition(newCrop, _this.mediaSize, _this.state.cropSize, zoom, rotation);\n      }\n      onCropChange(newCrop);\n    };\n    return _this;\n  }\n  Cropper.prototype.componentDidMount = function () {\n    if (!this.currentDoc || !this.currentWindow) return;\n    if (this.containerRef) {\n      if (this.containerRef.ownerDocument) {\n        this.currentDoc = this.containerRef.ownerDocument;\n      }\n      if (this.currentDoc.defaultView) {\n        this.currentWindow = this.currentDoc.defaultView;\n      }\n      this.initResizeObserver();\n      // only add window resize listener if ResizeObserver is not supported. Otherwise, it would be redundant\n      if (typeof window.ResizeObserver === 'undefined') {\n        this.currentWindow.addEventListener('resize', this.computeSizes);\n      }\n      this.props.zoomWithScroll && this.containerRef.addEventListener('wheel', this.onWheel, {\n        passive: false\n      });\n      this.containerRef.addEventListener('gesturestart', this.onGestureStart);\n    }\n    this.currentDoc.addEventListener('scroll', this.onScroll);\n    if (!this.props.disableAutomaticStylesInjection) {\n      this.styleRef = this.currentDoc.createElement('style');\n      this.styleRef.setAttribute('type', 'text/css');\n      if (this.props.nonce) {\n        this.styleRef.setAttribute('nonce', this.props.nonce);\n      }\n      this.styleRef.innerHTML = css_248z;\n      this.currentDoc.head.appendChild(this.styleRef);\n    }\n    // when rendered via SSR, the image can already be loaded and its onLoad callback will never be called\n    if (this.imageRef.current && this.imageRef.current.complete) {\n      this.onMediaLoad();\n    }\n    // set image and video refs in the parent if the callbacks exist\n    if (this.props.setImageRef) {\n      this.props.setImageRef(this.imageRef);\n    }\n    if (this.props.setVideoRef) {\n      this.props.setVideoRef(this.videoRef);\n    }\n  };\n  Cropper.prototype.componentWillUnmount = function () {\n    var _a, _b;\n    if (!this.currentDoc || !this.currentWindow) return;\n    if (typeof window.ResizeObserver === 'undefined') {\n      this.currentWindow.removeEventListener('resize', this.computeSizes);\n    }\n    (_a = this.resizeObserver) === null || _a === void 0 ? void 0 : _a.disconnect();\n    if (this.containerRef) {\n      this.containerRef.removeEventListener('gesturestart', this.preventZoomSafari);\n    }\n    if (this.styleRef) {\n      (_b = this.styleRef.parentNode) === null || _b === void 0 ? void 0 : _b.removeChild(this.styleRef);\n    }\n    this.cleanEvents();\n    this.props.zoomWithScroll && this.clearScrollEvent();\n  };\n  Cropper.prototype.componentDidUpdate = function (prevProps) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n    if (prevProps.rotation !== this.props.rotation) {\n      this.computeSizes();\n      this.recomputeCropPosition();\n    } else if (prevProps.aspect !== this.props.aspect) {\n      this.computeSizes();\n    } else if (prevProps.objectFit !== this.props.objectFit) {\n      this.computeSizes();\n    } else if (prevProps.zoom !== this.props.zoom) {\n      this.recomputeCropPosition();\n    } else if (((_a = prevProps.cropSize) === null || _a === void 0 ? void 0 : _a.height) !== ((_b = this.props.cropSize) === null || _b === void 0 ? void 0 : _b.height) || ((_c = prevProps.cropSize) === null || _c === void 0 ? void 0 : _c.width) !== ((_d = this.props.cropSize) === null || _d === void 0 ? void 0 : _d.width)) {\n      this.computeSizes();\n    } else if (((_e = prevProps.crop) === null || _e === void 0 ? void 0 : _e.x) !== ((_f = this.props.crop) === null || _f === void 0 ? void 0 : _f.x) || ((_g = prevProps.crop) === null || _g === void 0 ? void 0 : _g.y) !== ((_h = this.props.crop) === null || _h === void 0 ? void 0 : _h.y)) {\n      this.emitCropAreaChange();\n    }\n    if (prevProps.zoomWithScroll !== this.props.zoomWithScroll && this.containerRef) {\n      this.props.zoomWithScroll ? this.containerRef.addEventListener('wheel', this.onWheel, {\n        passive: false\n      }) : this.clearScrollEvent();\n    }\n    if (prevProps.video !== this.props.video) {\n      (_j = this.videoRef.current) === null || _j === void 0 ? void 0 : _j.load();\n    }\n    var objectFit = this.getObjectFit();\n    if (objectFit !== this.state.mediaObjectFit) {\n      this.setState({\n        mediaObjectFit: objectFit\n      }, this.computeSizes);\n    }\n  };\n  Cropper.prototype.getAspect = function () {\n    var _a = this.props,\n      cropSize = _a.cropSize,\n      aspect = _a.aspect;\n    if (cropSize) {\n      return cropSize.width / cropSize.height;\n    }\n    return aspect;\n  };\n  Cropper.prototype.getObjectFit = function () {\n    var _a, _b, _c, _d;\n    if (this.props.objectFit === 'cover') {\n      var mediaRef = this.imageRef.current || this.videoRef.current;\n      if (mediaRef && this.containerRef) {\n        this.containerRect = this.containerRef.getBoundingClientRect();\n        var containerAspect = this.containerRect.width / this.containerRect.height;\n        var naturalWidth = ((_a = this.imageRef.current) === null || _a === void 0 ? void 0 : _a.naturalWidth) || ((_b = this.videoRef.current) === null || _b === void 0 ? void 0 : _b.videoWidth) || 0;\n        var naturalHeight = ((_c = this.imageRef.current) === null || _c === void 0 ? void 0 : _c.naturalHeight) || ((_d = this.videoRef.current) === null || _d === void 0 ? void 0 : _d.videoHeight) || 0;\n        var mediaAspect = naturalWidth / naturalHeight;\n        return mediaAspect < containerAspect ? 'horizontal-cover' : 'vertical-cover';\n      }\n      return 'horizontal-cover';\n    }\n    return this.props.objectFit;\n  };\n  Cropper.prototype.onPinchStart = function (e) {\n    var pointA = Cropper.getTouchPoint(e.touches[0]);\n    var pointB = Cropper.getTouchPoint(e.touches[1]);\n    this.lastPinchDistance = getDistanceBetweenPoints(pointA, pointB);\n    this.lastPinchRotation = getRotationBetweenPoints(pointA, pointB);\n    this.onDragStart(getCenter(pointA, pointB));\n  };\n  Cropper.prototype.onPinchMove = function (e) {\n    var _this = this;\n    if (!this.currentDoc || !this.currentWindow) return;\n    var pointA = Cropper.getTouchPoint(e.touches[0]);\n    var pointB = Cropper.getTouchPoint(e.touches[1]);\n    var center = getCenter(pointA, pointB);\n    this.onDrag(center);\n    if (this.rafPinchTimeout) this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout);\n    this.rafPinchTimeout = this.currentWindow.requestAnimationFrame(function () {\n      var distance = getDistanceBetweenPoints(pointA, pointB);\n      var newZoom = _this.props.zoom * (distance / _this.lastPinchDistance);\n      _this.setNewZoom(newZoom, center, {\n        shouldUpdatePosition: false\n      });\n      _this.lastPinchDistance = distance;\n      var rotation = getRotationBetweenPoints(pointA, pointB);\n      var newRotation = _this.props.rotation + (rotation - _this.lastPinchRotation);\n      _this.props.onRotationChange && _this.props.onRotationChange(newRotation);\n      _this.lastPinchRotation = rotation;\n    });\n  };\n  Cropper.prototype.render = function () {\n    var _this = this;\n    var _a;\n    var _b = this.props,\n      image = _b.image,\n      video = _b.video,\n      mediaProps = _b.mediaProps,\n      transform = _b.transform,\n      _c = _b.crop,\n      x = _c.x,\n      y = _c.y,\n      rotation = _b.rotation,\n      zoom = _b.zoom,\n      cropShape = _b.cropShape,\n      showGrid = _b.showGrid,\n      _d = _b.style,\n      containerStyle = _d.containerStyle,\n      cropAreaStyle = _d.cropAreaStyle,\n      mediaStyle = _d.mediaStyle,\n      _e = _b.classes,\n      containerClassName = _e.containerClassName,\n      cropAreaClassName = _e.cropAreaClassName,\n      mediaClassName = _e.mediaClassName;\n    var objectFit = (_a = this.state.mediaObjectFit) !== null && _a !== void 0 ? _a : this.getObjectFit();\n    return React.createElement(\"div\", {\n      onMouseDown: this.onMouseDown,\n      onTouchStart: this.onTouchStart,\n      ref: function ref(el) {\n        return _this.containerRef = el;\n      },\n      \"data-testid\": \"container\",\n      style: containerStyle,\n      className: classNames('reactEasyCrop_Container', containerClassName)\n    }, image ? React.createElement(\"img\", __assign({\n      alt: \"\",\n      className: classNames('reactEasyCrop_Image', objectFit === 'contain' && 'reactEasyCrop_Contain', objectFit === 'horizontal-cover' && 'reactEasyCrop_Cover_Horizontal', objectFit === 'vertical-cover' && 'reactEasyCrop_Cover_Vertical', mediaClassName)\n    }, mediaProps, {\n      src: image,\n      ref: this.imageRef,\n      style: __assign(__assign({}, mediaStyle), {\n        transform: transform || \"translate(\".concat(x, \"px, \").concat(y, \"px) rotate(\").concat(rotation, \"deg) scale(\").concat(zoom, \")\")\n      }),\n      onLoad: this.onMediaLoad\n    })) : video && React.createElement(\"video\", __assign({\n      autoPlay: true,\n      playsInline: true,\n      loop: true,\n      muted: true,\n      className: classNames('reactEasyCrop_Video', objectFit === 'contain' && 'reactEasyCrop_Contain', objectFit === 'horizontal-cover' && 'reactEasyCrop_Cover_Horizontal', objectFit === 'vertical-cover' && 'reactEasyCrop_Cover_Vertical', mediaClassName)\n    }, mediaProps, {\n      ref: this.videoRef,\n      onLoadedMetadata: this.onMediaLoad,\n      style: __assign(__assign({}, mediaStyle), {\n        transform: transform || \"translate(\".concat(x, \"px, \").concat(y, \"px) rotate(\").concat(rotation, \"deg) scale(\").concat(zoom, \")\")\n      }),\n      controls: false\n    }), (Array.isArray(video) ? video : [{\n      src: video\n    }]).map(function (item) {\n      return React.createElement(\"source\", __assign({\n        key: item.src\n      }, item));\n    })), this.state.cropSize && React.createElement(\"div\", {\n      style: __assign(__assign({}, cropAreaStyle), {\n        width: this.state.cropSize.width,\n        height: this.state.cropSize.height\n      }),\n      tabIndex: 0,\n      onKeyDown: this.onKeyDown,\n      \"data-testid\": \"cropper\",\n      className: classNames('reactEasyCrop_CropArea', cropShape === 'round' && 'reactEasyCrop_CropAreaRound', showGrid && 'reactEasyCrop_CropAreaGrid', cropAreaClassName)\n    }));\n  };\n  Cropper.defaultProps = {\n    zoom: 1,\n    rotation: 0,\n    aspect: 4 / 3,\n    maxZoom: MAX_ZOOM,\n    minZoom: MIN_ZOOM,\n    cropShape: 'rect',\n    objectFit: 'contain',\n    showGrid: true,\n    style: {},\n    classes: {},\n    mediaProps: {},\n    zoomSpeed: 1,\n    restrictPosition: true,\n    zoomWithScroll: true,\n    keyboardStep: KEYBOARD_STEP\n  };\n  Cropper.getMousePoint = function (e) {\n    return {\n      x: Number(e.clientX),\n      y: Number(e.clientY)\n    };\n  };\n  Cropper.getTouchPoint = function (touch) {\n    return {\n      x: Number(touch.clientX),\n      y: Number(touch.clientY)\n    };\n  };\n  return Cropper;\n}(React.Component);\n\nexport { Cropper as default, getInitialCropFromCroppedAreaPercentages, getInitialCropFromCroppedAreaPixels };\n//# sourceMappingURL=index.module.js.map\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Layout,Menu,Avatar,Button,Space,message}from'antd';import{UserOutlined,SettingOutlined,BookOutlined,HistoryOutlined}from'@ant-design/icons';import UserInfo from'./components/UserInfo';import PrivacySettings from'./components/PrivacySettings';import StudyPlan from'./components/StudyPlan';import KnowledgeTraining from'./components/KnowledgeTraining';import'./index.less';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const{Header,Sider,Content}=Layout;// 从 localStorage 获取用户信息，如果没有则使用默认值\nconst getInitialUserInfo=()=>{const savedUserInfo=localStorage.getItem('userInfo');return savedUserInfo?JSON.parse(savedUserInfo):{avatar:'',nickname:'用户1234',focusTime:0,lastLoginTime:'',phone:'',email:''};};const UserCenter=()=>{const[selectedMenu,setSelectedMenu]=useState('userInfo');const[userInfo,setUserInfo]=useState(getInitialUserInfo);const navigate=useNavigate();// 当 userInfo 更新时，保存到 localStorage\nuseEffect(()=>{localStorage.setItem('userInfo',JSON.stringify(userInfo));},[userInfo]);// 更新用户信息的处理函数\nconst handleUpdateUserInfo=newInfo=>{setUserInfo(newInfo);};// 渲染对应的内容组件\nconst renderContent=()=>{switch(selectedMenu){case'userInfo':return/*#__PURE__*/_jsx(UserInfo,{userInfo:userInfo,onUpdate:handleUpdateUserInfo});case'privacy':return/*#__PURE__*/_jsx(PrivacySettings,{});case'studyPlan':return/*#__PURE__*/_jsx(StudyPlan,{});case'knowledge':return/*#__PURE__*/_jsx(KnowledgeTraining,{});default:return/*#__PURE__*/_jsx(UserInfo,{userInfo:userInfo,onUpdate:handleUpdateUserInfo});}};const handleLogout=()=>{// 清除所有相关的状态\nlocalStorage.clear();// 清除所有本地存储\n// 或者只清除特定的项\n// localStorage.removeItem('isLoggedIn');\n// localStorage.removeItem('userInfo');\nmessage.success('退出登录成功');navigate('/login',{replace:true});};return/*#__PURE__*/_jsxs(Layout,{className:\"user-center\",children:[/*#__PURE__*/_jsxs(Header,{className:\"header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"logo\",children:\"\\u5B66\\u4E60\\u52A9\\u624B\"}),/*#__PURE__*/_jsxs(Menu,{mode:\"horizontal\",theme:\"dark\",children:[/*#__PURE__*/_jsx(Menu.Item,{onClick:()=>navigate('/'),children:\"\\u9996\\u9875\"},\"home\"),/*#__PURE__*/_jsx(Menu.Item,{onClick:()=>navigate('/study-plan'),children:\"\\u5B66\\u4E60\\u8BA1\\u5212\"},\"plan\"),/*#__PURE__*/_jsx(Menu.Item,{onClick:()=>navigate('/feedback'),children:\"\\u53CD\\u9988\"},\"feedback\"),/*#__PURE__*/_jsx(Menu.Item,{onClick:()=>navigate('/user'),children:\"\\u4E2A\\u4EBA\\u4E2D\\u5FC3\"},\"user\")]}),/*#__PURE__*/_jsx(\"div\",{className:\"header-right\",children:/*#__PURE__*/_jsxs(Space,{children:[/*#__PURE__*/_jsx(Button,{type:\"primary\",ghost:true,onClick:()=>navigate('/register'),children:\"\\u6CE8\\u518C\"}),/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:handleLogout,children:\"\\u9000\\u51FA\\u767B\\u5F55\"})]})})]}),/*#__PURE__*/_jsxs(Layout,{children:[/*#__PURE__*/_jsxs(Sider,{width:200,className:\"site-sider\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user-brief\",children:[/*#__PURE__*/_jsx(Avatar,{size:64,icon:/*#__PURE__*/_jsx(UserOutlined,{}),src:userInfo.avatar}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-info\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"nickname\",children:userInfo.nickname}),/*#__PURE__*/_jsxs(\"div\",{className:\"focus-time\",children:[\"\\u4E13\\u6CE8\\u65F6\\u957F\\uFF1A\",userInfo.focusTime,\"\\u5206\\u949F\"]})]})]}),/*#__PURE__*/_jsxs(Menu,{mode:\"inline\",selectedKeys:[selectedMenu],onSelect:_ref=>{let{key}=_ref;return setSelectedMenu(key);},className:\"side-menu\",children:[/*#__PURE__*/_jsx(Menu.Item,{icon:/*#__PURE__*/_jsx(UserOutlined,{}),children:\"\\u4E2A\\u4EBA\\u4FE1\\u606F\"},\"userInfo\"),/*#__PURE__*/_jsx(Menu.Item,{icon:/*#__PURE__*/_jsx(SettingOutlined,{}),children:\"\\u9690\\u79C1\\u8BBE\\u7F6E\"},\"privacy\"),/*#__PURE__*/_jsx(Menu.Item,{icon:/*#__PURE__*/_jsx(BookOutlined,{}),children:\"\\u5B66\\u4E60\\u8BA1\\u5212\"},\"studyPlan\"),/*#__PURE__*/_jsx(Menu.Item,{icon:/*#__PURE__*/_jsx(HistoryOutlined,{}),children:\"\\u77E5\\u8BC6\\u70B9\\u638C\\u63E1\\u60C5\\u51B5\"},\"knowledge\")]})]}),/*#__PURE__*/_jsx(Content,{className:\"main-content\",children:renderContent()})]})]});};export default UserCenter;","map":{"version":3,"names":["React","useState","useEffect","Layout","Menu","Avatar","Button","Space","message","UserOutlined","SettingOutlined","BookOutlined","HistoryOutlined","UserInfo","PrivacySettings","StudyPlan","KnowledgeTraining","useNavigate","jsx","_jsx","jsxs","_jsxs","Header","Sider","Content","getInitialUserInfo","savedUserInfo","localStorage","getItem","JSON","parse","avatar","nickname","focusTime","lastLoginTime","phone","email","UserCenter","selectedMenu","setSelectedMenu","userInfo","setUserInfo","navigate","setItem","stringify","handleUpdateUserInfo","newInfo","renderContent","onUpdate","handleLogout","clear","success","replace","className","children","mode","theme","Item","onClick","type","ghost","width","size","icon","src","selectedKeys","onSelect","_ref","key"],"sources":["/home/gnahz/Documents/learning_msys/frontpages/src/pages/UserCenter/index.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Layout, Menu, Avatar, Button, Space, message } from 'antd';\r\nimport {\r\n  UserOutlined,\r\n  SettingOutlined,\r\n  BookOutlined,\r\n  HistoryOutlined\r\n} from '@ant-design/icons';\r\nimport UserInfo from './components/UserInfo';\r\nimport PrivacySettings from './components/PrivacySettings';\r\nimport StudyPlan from './components/StudyPlan';\r\nimport KnowledgeTraining from './components/KnowledgeTraining';\r\nimport './index.less';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst { Header, Sider, Content } = Layout;\r\n\r\n// 从 localStorage 获取用户信息，如果没有则使用默认值\r\nconst getInitialUserInfo = () => {\r\n  const savedUserInfo = localStorage.getItem('userInfo');\r\n  return savedUserInfo ? JSON.parse(savedUserInfo) : {\r\n    avatar: '',\r\n    nickname: '用户1234',\r\n    focusTime: 0,\r\n    lastLoginTime: '',\r\n    phone: '',\r\n    email: ''\r\n  };\r\n};\r\n\r\nconst UserCenter = () => {\r\n  const [selectedMenu, setSelectedMenu] = useState('userInfo');\r\n  const [userInfo, setUserInfo] = useState(getInitialUserInfo);\r\n  const navigate = useNavigate();\r\n\r\n  // 当 userInfo 更新时，保存到 localStorage\r\n  useEffect(() => {\r\n    localStorage.setItem('userInfo', JSON.stringify(userInfo));\r\n  }, [userInfo]);\r\n\r\n  // 更新用户信息的处理函数\r\n  const handleUpdateUserInfo = (newInfo) => {\r\n    setUserInfo(newInfo);\r\n  };\r\n\r\n  // 渲染对应的内容组件\r\n  const renderContent = () => {\r\n    switch(selectedMenu) {\r\n      case 'userInfo':\r\n        return <UserInfo userInfo={userInfo} onUpdate={handleUpdateUserInfo} />;\r\n      case 'privacy':\r\n        return <PrivacySettings />;\r\n      case 'studyPlan':\r\n        return <StudyPlan />;\r\n      case 'knowledge':\r\n        return <KnowledgeTraining />;\r\n      default:\r\n        return <UserInfo userInfo={userInfo} onUpdate={handleUpdateUserInfo} />;\r\n    }\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    // 清除所有相关的状态\r\n    localStorage.clear();  // 清除所有本地存储\r\n    // 或者只清除特定的项\r\n    // localStorage.removeItem('isLoggedIn');\r\n    // localStorage.removeItem('userInfo');\r\n    \r\n    message.success('退出登录成功');\r\n    navigate('/login', { replace: true });\r\n  };\r\n\r\n  return (\r\n    <Layout className=\"user-center\">\r\n      <Header className=\"header\">\r\n        <div className=\"logo\">学习助手</div>\r\n        <Menu mode=\"horizontal\" theme=\"dark\">\r\n          <Menu.Item key=\"home\" onClick={() => navigate('/')}>首页</Menu.Item>\r\n          <Menu.Item key=\"plan\" onClick={() => navigate('/study-plan')}>学习计划</Menu.Item>\r\n          <Menu.Item key=\"feedback\" onClick={() => navigate('/feedback')}>反馈</Menu.Item>\r\n          <Menu.Item key=\"user\" onClick={() => navigate('/user')}>个人中心</Menu.Item>\r\n        </Menu>\r\n        <div className=\"header-right\">\r\n          <Space>\r\n            <Button type=\"primary\" ghost onClick={() => navigate('/register')}>\r\n              注册\r\n            </Button>\r\n            <Button type=\"primary\" onClick={handleLogout}>\r\n              退出登录\r\n            </Button>\r\n          </Space>\r\n        </div>\r\n      </Header>\r\n      \r\n      <Layout>\r\n        <Sider width={200} className=\"site-sider\">\r\n          <div className=\"user-brief\">\r\n            <Avatar size={64} icon={<UserOutlined />} src={userInfo.avatar} />\r\n            <div className=\"user-info\">\r\n              <div className=\"nickname\">{userInfo.nickname}</div>\r\n              <div className=\"focus-time\">专注时长：{userInfo.focusTime}分钟</div>\r\n            </div>\r\n          </div>\r\n          <Menu\r\n            mode=\"inline\"\r\n            selectedKeys={[selectedMenu]}\r\n            onSelect={({key}) => setSelectedMenu(key)}\r\n            className=\"side-menu\"\r\n          >\r\n            <Menu.Item key=\"userInfo\" icon={<UserOutlined />}>\r\n              个人信息\r\n            </Menu.Item>\r\n            <Menu.Item key=\"privacy\" icon={<SettingOutlined />}>\r\n              隐私设置\r\n            </Menu.Item>\r\n            <Menu.Item key=\"studyPlan\" icon={<BookOutlined />}>\r\n              学习计划\r\n            </Menu.Item>\r\n            <Menu.Item key=\"knowledge\" icon={<HistoryOutlined />}>\r\n              知识点掌握情况\r\n            </Menu.Item>\r\n          </Menu>\r\n        </Sider>\r\n        \r\n        <Content className=\"main-content\">\r\n          {renderContent()}\r\n        </Content>\r\n      </Layout>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default UserCenter; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}